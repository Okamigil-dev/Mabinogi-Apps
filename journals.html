<!DOCTYPE html>
<html lang="en">
<head>
    <!-- PWA Manifest & Settings -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#050506">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // navigator.serviceWorker.register('sw.js').catch(err => console.log('Service Worker failed', err));
            });
        }
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Journals</title>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Theme: Gold/Amber for Journals */
            --bg: #09090b;
            --sidebar-bg: #121214;
            --card-bg: #18181b;
            --accent: #fbbf24; 
            --accent-dim: rgba(251, 191, 36, 0.1);
            
            --border: #27272a;
            --text-main: #e4e4e7;
            --text-dim: #a1a1aa;
            --danger: #ef4444;
            --success: #00ff88;
            --star-gold: #fbbf24;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text-main);
            margin: 0;
            font-size: 13px;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Layout */
        .interface-container { display: flex; flex-direction: column; height: 100%; width: 100%; }
        .header-bar { background: var(--sidebar-bg); border-bottom: 1px solid var(--border); padding: 10px 20px; flex-shrink: 0; }
        .title-section { display: flex; justify-content: space-between; align-items: center; }
        .main-title { font-size: 16px; font-weight: 700; color: #fff; letter-spacing: 0.5px; }

        .content-grid { display: grid; grid-template-columns: 280px 1fr 300px; flex-grow: 1; overflow: hidden; }
        .panel { background: var(--bg); display: flex; flex-direction: column; border-right: 1px solid var(--border); overflow-y: auto; }
        .panel:last-child { border-right: none; }
        .center-panel { background: #0c0c0e; display: flex; flex-direction: column; padding: 0; }

        /* Components */
        .panel-label { font-size: 11px; font-weight: 600; color: var(--text-dim); margin-bottom: 8px; display: block; text-transform: uppercase; }
        .config-section { padding: 20px; border-bottom: 1px solid var(--border); }
        
        .input-dark { background: var(--card-bg); border: 1px solid var(--border); color: #fff; padding: 8px; border-radius: 6px; width: 100%; }
        .input-dark:focus { border-color: var(--accent); }
        
        .hub-btn { 
            color: var(--text-dim); text-decoration: none; font-weight: 600; font-size: 12px; 
            padding: 8px 12px; border-radius: 6px; transition: 0.2s; 
            border: 1px solid transparent; background: transparent; cursor: pointer; text-align: left; width: 100%;
            display: flex; align-items: center; gap: 10px;
        }
        .hub-btn:hover { color: #fff; background: var(--border); }
        .hub-btn.active { color: var(--accent); background: var(--accent-dim); border-color: var(--accent); }

        /* Recipe Card */
        .recipe-list { padding: 20px; overflow-y: auto; flex-grow: 1; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 10px; }
        
        .recipe-card {
            background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px;
            padding: 15px; transition: border-color 0.2s; display: flex; flex-direction: column; gap: 10px;
        }
        .recipe-card:hover { border-color: #444; }
        .recipe-card.complete { opacity: 0.6; border-style: dashed; }

        .recipe-header { display: flex; justify-content: space-between; align-items: center; gap: 10px; }
        .recipe-name { font-weight: 700; color: #fff; font-size: 14px; flex-grow: 1; }
        
        /* New Inputs for Editing */
        .method-select {
            background: var(--bg); /* Darker background for visibility */
            border: 1px solid var(--border); 
            color: var(--text-main); /* Brighter text */
            font-size: 11px; 
            padding: 4px 8px; 
            border-radius: 4px; 
            outline: none; 
            cursor: pointer;
            min-width: 120px; /* Wider to fit text */
            color-scheme: dark; /* Helps standard selects render dark in modern browsers */
        }
        .method-select:hover, .method-select:focus { border-color: var(--accent); }
        .method-select option { background: #121214; color: #fff; } /* Force dark options */

        .recipe-ingredients { font-size: 11px; color: var(--text-dim); line-height: 1.4; margin-top: 5px; }
        .ing-row { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05); padding: 4px 0; }
        
        /* New Input for Ingredient Names */
        .ing-name-input {
            background: transparent; border: 1px solid transparent; 
            color: var(--text-main); font-size: 11px; width: 100%;
            padding: 2px; border-radius: 4px; font-family: 'Inter', sans-serif;
        }
        .ing-name-input:hover, .ing-name-input:focus { border-color: var(--border); background: rgba(255,255,255,0.05); }

        .ing-val-input { 
            font-family: 'JetBrains Mono', monospace; color: var(--accent); 
            background: transparent; border: 1px solid transparent; 
            width: 40px; text-align: right; padding: 2px; border-radius: 4px;
            font-size: 11px;
        }
        .ing-val-input:hover, .ing-val-input:focus { border-color: var(--border); background: rgba(0,0,0,0.3); }
        
        /* Star Rating */
        .star-rating { display: flex; gap: 4px; align-items: center; cursor: pointer; min-height: 24px; margin-top: 5px; }
        .star { font-size: 18px; color: #333; transition: color 0.1s; padding: 2px; }
        .star.filled { color: var(--star-gold); }
        .star:hover { color: #fff; }

        .star-reset { 
            font-size: 10px; 
            color: var(--danger); 
            opacity: 0.6; 
            margin-left: 8px; 
            padding: 2px 6px;
            border: 1px solid var(--border);
            background: rgba(239, 68, 68, 0.05);
            border-radius: 4px;
            transition: 0.2s;
            display: inline-flex;
            align-items: center;
            height: 20px;
        }
        .star-reset:hover { opacity: 1; border-color: var(--danger); background: rgba(239, 68, 68, 0.2); }

        /* Stats Box */
        .stat-box { background: var(--card-bg); padding: 15px; border-radius: 8px; border: 1px solid var(--border); text-align: center; }
        .stat-val { font-size: 24px; font-weight: 700; color: var(--accent); font-family: 'JetBrains Mono'; }
        .stat-label { font-size: 11px; color: var(--text-dim); text-transform: uppercase; margin-top: 5px; }

        /* Toggles */
        .toggle-row { display: flex; align-items: center; justify-content: space-between; padding: 5px 0; cursor: pointer; }
        .toggle-switch { width: 36px; height: 20px; background: var(--border); border-radius: 99px; position: relative; transition: 0.2s; }
        .toggle-switch::after { content: ''; position: absolute; top: 2px; left: 2px; width: 16px; height: 16px; background: #fff; border-radius: 50%; transition: 0.2s; }
        input:checked + .toggle-switch { background: var(--accent); }
        input:checked + .toggle-switch::after { transform: translateX(16px); }
        .toggle-input { display: none; }
        
        /* Mobile */
        .mobile-nav { display: none; }
        .mobile-backdrop { display: none; }
        .drawer-header { display: none; } 
        .mobile-only { display: none; }

        @media (max-width: 1000px) {
            .mobile-only { display: block; }
            .content-grid { display: block; height: calc(100dvh - 50px); }
            .header-bar { display: none; }

            .mobile-nav { 
                display: flex; justify-content: space-between; align-items: center; 
                padding: 10px 15px; background: var(--sidebar-bg); border-bottom: 1px solid var(--border); 
                height: 50px; z-index: 50; flex-shrink: 0;
            }
            .nav-trigger { background: transparent; border: 1px solid var(--border); color: var(--text-main); padding: 6px 12px; border-radius: 6px; font-size: 14px; cursor: pointer; }
            
            .left-panel, .right-panel {
                position: fixed; top: 0; bottom: 0; width: 300px; max-width: 85%; z-index: 1001; 
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.3s; 
                visibility: hidden; background: var(--bg); box-shadow: 0 0 50px rgba(0,0,0,0.8);
            }
            .left-panel { left: 0; transform: translateX(-100%); border-right: 1px solid var(--border); }
            .right-panel { right: 0; transform: translateX(100%); border-left: 1px solid var(--border); }
            .left-panel.active, .right-panel.active { transform: translateX(0); visibility: visible; }
            
            .center-panel { height: 100%; width: 100%; border: none; padding: 0; position: relative; z-index: 1; }
            .mobile-backdrop { display: block; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
            .mobile-backdrop.active { opacity: 1; pointer-events: all; }
            
            .drawer-header { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--border); background: var(--sidebar-bg); }
            .user-profile-box { display: flex; align-items: center; gap: 12px; padding: 15px; border-bottom: 1px solid var(--border); }
        }
    </style>
</head>
<body>

    <div class="mobile-nav">
        <button class="nav-trigger" onclick="toggleSidebar('left')">‚ò∞ Filter</button>
        <span style="font-weight:700; color:#fff;">Journals</span>
        <button class="nav-trigger" onclick="toggleSidebar('right')">Stats</button>
    </div>

    <div class="mobile-backdrop" id="mobile-backdrop" onclick="closeSidebars()"></div>
    
    <!-- IMPORT MODAL -->
    <div id="import-modal" style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px);">
        <div style="background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; width: 100%; max-width: 500px; display: flex; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
            <div style="padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                <span style="font-weight:700; color:#fff;">Update Public Database</span>
                <button onclick="toggleImport(false)" style="background:none; border:none; color:var(--text-dim); cursor:pointer; font-size:18px;">√ó</button>
            </div>
            <div style="padding: 20px;">
                <p style="font-size:12px; color:var(--text-dim); margin-bottom:10px;">
                    <b>Admin Only:</b> This will overwrite the public 'public_recipes' database node with your current local static list.
                </p>
                <div style="background:rgba(255,255,255,0.05); padding:10px; border-radius:6px; margin-bottom:10px;">
                    <span style="color:var(--accent); font-size:11px;">Target Node: /public_recipes</span>
                </div>
            </div>
            <div style="padding: 15px 20px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 10px;">
                <button onclick="toggleImport(false)" class="hub-btn">Cancel</button>
                <button onclick="uploadMasterList()" class="hub-btn active" style="border-color:var(--danger); color:var(--danger);">Upload Local to DB</button>
            </div>
        </div>
    </div>

    <div class="interface-container">
        <!-- Global Navigation Bar -->
        <script src="nav.js" defer></script>
            <global-nav></global-nav>
        
        <div class="header-bar">
            <div class="title-section">
                <div style="display:flex; align-items:center;">
                    <span class="main-title">MABI JOURNALS</span>
                </div>
                <user-header></user-header>
            </div>
        </div>

        <div class="content-grid">
            <!-- LEFT PANEL: Journal Selection & Filters -->
            <div class="panel left-panel" id="left-panel">
                <div class="drawer-header">
                    <span class="drawer-title">Selector</span>
                    <button class="drawer-close" onclick="closeSidebars()">√ó</button>
                </div>
                
                <div class="user-profile-box mobile-only">
                    <user-header></user-header>
                </div>

                <!-- JOURNAL SELECTOR -->
                <div class="config-section">
                    <label class="panel-label">Select Journal</label>
                    <button id="btn-j-cooking" class="hub-btn active" onclick="setJournal('cooking')">üç≥ Cooking</button>
                    <button id="btn-j-fishing" class="hub-btn" onclick="setJournal('fishing')" style="opacity:0.5; margin-top:4px;">üé£ Fishing (WIP)</button>
                    <button id="btn-j-taming" class="hub-btn" onclick="setJournal('taming')" style="opacity:0.5; margin-top:4px;">üêæ Taming (WIP)</button>
                </div>

                <!-- COOKING SPECIFIC FILTERS -->
                <div id="ctrl-cooking" style="display:block;">
                    
            <!--       <div class="config-section" style="border-top:1px solid var(--border);">
                        <label class="panel-label">Admin</label>
                        <button class="hub-btn" onclick="toggleImport(true)">üìÇ Update Public Database</button>
                    </div> 
            -->

                    <div class="config-section">
                        <label class="panel-label">Search</label>
                        <input type="text" id="search-input" class="input-dark" placeholder="Dish name..." oninput="renderRecipes()">
                    </div>

                    <div class="config-section">
                        <label class="panel-label">Settings</label>
                        <label class="toggle-row">
                            <span style="font-size:12px; color:#aaa;">Hide 5-Star Dishes</span>
                            <input type="checkbox" id="hide-completed" class="toggle-input" onchange="renderRecipes()">
                            <div class="toggle-switch"></div>
                        </label>
                    </div>

                    <div class="config-section" style="border-bottom:none;">
                        <label class="panel-label">Cooking Method</label>
                        <div id="method-filters" style="display:flex; flex-direction:column; gap:4px;">
                            <!-- JS populated -->
                        </div>
                    </div>
                </div>

                <!-- FISHING/TAMING FILTERS (Placeholders) -->
                <div id="ctrl-fishing" style="display:none; padding:20px; color:#555; text-align:center;">Fishing filters coming soon.</div>
                <div id="ctrl-taming" style="display:none; padding:20px; color:#555; text-align:center;">Taming filters coming soon.</div>
            </div>

            <!-- CENTER PANEL: Content Area -->
            <div class="panel center-panel">
                <!-- Cooking View -->
                <div id="view-cooking" style="width:100%; height:100%; display:flex; flex-direction:column;">
                    <div id="recipe-container" class="recipe-list"></div>
                    <div id="empty-state" style="display:none; color:var(--text-dim); text-align:center; padding-top:50px;">No recipes found.</div>
                </div>

                <!-- Fishing View -->
                <div id="view-fishing" style="display:none; width:100%; height:100%; align-items:center; justify-content:center; color:var(--text-dim);">
                    <h3>Fishing Journal</h3>
                    <p>Under Construction</p>
                </div>

                <!-- Taming View -->
                <div id="view-taming" style="display:none; width:100%; height:100%; align-items:center; justify-content:center; color:var(--text-dim);">
                    <h3>Taming Journal</h3>
                    <p>Under Construction</p>
                </div>
            </div>

            <!-- RIGHT PANEL: Stats -->
            <div class="panel right-panel" id="right-panel">
                <div class="drawer-header">
                    <span class="drawer-title">Stats</span>
                    <button class="drawer-close" onclick="closeSidebars()">√ó</button>
                </div>

                <!-- COOKING STATS -->
                <div id="stats-cooking" style="display:block;">
                    <div class="config-section">
                        <label class="panel-label">Progress</label>
                        <div class="stat-box">
                            <div id="stat-completed" class="stat-val">0</div>
                            <div class="stat-label">5-Star Dishes</div>
                        </div>
                        <div class="stat-box" style="margin-top:10px;">
                            <div id="stat-started" class="stat-val">0</div>
                            <div class="stat-label">Dishes Started</div>
                        </div>
                        <div class="stat-box" style="margin-top:10px;">
                            <div id="stat-total" class="stat-val">0</div>
                            <div class="stat-label">Total Stars Earned</div>
                        </div>
                    </div>

                    <div class="config-section" style="border-bottom:none;">
                        <label class="panel-label">Sort By</label>
                        <div style="display:flex; flex-direction:column; gap:8px;">
                            <button class="hub-btn active" onclick="setSort('default')" id="sort-default">Journal Order</button>
                            <button class="hub-btn" onclick="setSort('name')" id="sort-name">Name (A-Z)</button>
                            <button class="hub-btn" onclick="setSort('stars-asc')" id="sort-stars-asc">Stars (Low to High)</button>
                            <button class="hub-btn" onclick="setSort('stars-desc')" id="sort-stars-desc">Stars (High to Low)</button>
                        </div>
                    </div>
                </div>
                
                <div id="stats-fishing" style="display:none; padding:20px; text-align:center; color:var(--text-dim);">No stats available.</div>
                <div id="stats-taming" style="display:none; padding:20px; text-align:center; color:var(--text-dim);">No stats available.</div>
            </div>
        </div>
    </div>

    <script>
    const firebaseConfig = { apiKey: "AIzaSyC7A3Rzi-VddhqZiFGjHjjqBwCdX1ks6yM", authDomain: "mabinogi-tracker.firebaseapp.com", databaseURL: "https://mabinogi-tracker-default-rtdb.firebaseio.com", projectId: "mabinogi-tracker", storageBucket: "mabinogi-tracker.firebasestorage.app", appId: "1:267690802644:web:fccdd005d5c8990504ea41", measurementId: "G-VBDBKQ3M1B" };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);

    // --- STATIC DATA: FULL RECIPE DATABASE (With correct 5-Star Ratios) ---
    // Order maintained from user's list (Journal Order)
/*    let RECIPE_DB = [
        {name: "Potato and Egg Salad", method: "Mixing", ingredients: [{n:"Steamed Potato", r:75}, {n:"Hard-Boiled Egg", r:15}, {n:"Mayonnaise", r:10}]},
        {name: "Potato Salad", method: "Mixing", ingredients: [{n:"Steamed Potato", r:68}, {n:"Onion", r:23}, {n:"Salt", r:9}]},
        {name: "Egg Salad", method: "Mixing", ingredients: [{n:"Hard-Boiled Egg", r:75}, {n:"Mayonnaise", r:15}, {n:"Salt", r:10}]},
        {name: "Fruit Salad", method: "Mixing", ingredients: [{n:"Assorted Fruits", r:83}, {n:"Mayonnaise", r:17}]},
        {name: "Catfish Garden Salad", method: "Mixing", ingredients: [{n:"Catfish", r:50}, {n:"Mixed Vegetables", r:40}, {n:"Mayonnaise", r:10}]},
        {name: "Caviar Salad", method: "Mixing", ingredients: [{n:"Mako Shark", r:50}, {n:"Assorted Fruits", r:40}, {n:"Mayonnaise", r:10}]},
        {name: "Tomato Basil Salad", method: "Mixing", ingredients: [{n:"Tomato", r:50}, {n:"Basil", r:30}, {n:"Steamed Potato", r:20}]},
        {name: "Herb Mushroom Salad", method: "Mixing", ingredients: [{n:"Steamed Mushroom", r:60}, {n:"Thyme", r:30}, {n:"Olive Oil", r:10}]},
        {name: "Dog Biscuit", method: "Mixing", ingredients: [{n:"Chocolate Chip Cookie", r:50}, {n:"Butter Biscuit", r:50}]},
        {name: "Assorted Fruits", method: "Mixing", ingredients: [{n:"Strawberry", r:45}, {n:"Apple", r:31}, {n:"Berry", r:24}]},
        {name: "Granita", method: "Mixing", ingredients: [{n:"Assorted Fruits", r:40}, {n:"Sugar", r:20}, {n:"Ice", r:40}]},
        {name: "Magic Bean Tofu", method: "Boiling", ingredients: [{n:"Magic Bean Powder", r:75}, {n:"Bottled Water", r:15}, {n:"Nigari", r:10}]},
        {name: "Mashed Roasted Bean Powder Tofu", method: "Boiling", ingredients: [{n:"Roasted Bean Powder", r:80}, {n:"Bottled Water", r:15}, {n:"Salt", r:5}]},
        {name: "Mashed Peeled Bean Powder Tofu", method: "Boiling", ingredients: [{n:"Peeled Bean Powder", r:80}, {n:"Bottled Water", r:15}, {n:"Salt", r:5}]},
        {name: "Mashed Water-soaked Bean Powder Tofu", method: "Boiling", ingredients: [{n:"Water-soaked Bean Powder", r:80}, {n:"Bottled Water", r:15}, {n:"Salt", r:5}]},
        {name: "Mushroom Canape", method: "Mixing", ingredients: [{n:"Hazelnut Mushroom", r:60}, {n:"Slice of Cheese", r:30}, {n:"Whipped Cream", r:10}]},
        {name: "Bacon and Potato Dog Food", method: "Mixing", ingredients: [{n:"Potato", r:60}, {n:"Bacon", r:40}]},
        {name: "Vegetable Canape", method: "Mixing", ingredients: [{n:"Carrot", r:40}, {n:"Steamed Potato", r:50}, {n:"Lemon", r:10}]},
        {name: "Seasoned Smelt", method: "Mixing", ingredients: [{n:"Fried Vegetables", r:50}, {n:"Smelt", r:50}]},
        {name: "Shrimp Dog Food", method: "Mixing", ingredients: [{n:"Steamed Rice", r:60}, {n:"Shrimp", r:30}, {n:"Salt", r:10}]},
        {name: "Shrimp Bruschetta", method: "Mixing", ingredients: [{n:"Bread", r:50}, {n:"Mixed Vegetables", r:30}, {n:"Shrimp", r:20}]},
        {name: "Corned Abb Neagh Carp and Vegetables", method: "Mixing", ingredients: [{n:"Abb Neagh Carp", r:40}, {n:"Mixed Vegetables", r:50}, {n:"Salt", r:10}]},
        {name: "Egg Caviar", method: "Mixing", ingredients: [{n:"Fried Egg", r:50}, {n:"Sturgeon", r:40}, {n:"Slice of Cheese", r:10}]},
        {name: "Chocolate", method: "Jam Making", ingredients: [{n:"Baking Chocolate", r:42}, {n:"Whipped Cream", r:41}, {n:"Sugar", r:17}]},
        {name: "Caviar Canape", method: "Mixing", ingredients: [{n:"Sturgeon", r:40}, {n:"Bread", r:55}, {n:"Berry", r:5}]},
        {name: "Cream Farfalle", method: "Mixing", ingredients: [{n:"Short Pasta", r:60}, {n:"Cream Sauce", r:35}, {n:"Pepper", r:5}]},
        {name: "Jellyfish Salad", method: "Mixing", ingredients: [{n:"Jellyfish", r:80}, {n:"Salt", r:10}, {n:"Sugar", r:10}]},
        {name: "Belvast Eel Rice Bowl", method: "Baking", ingredients: [{n:"Steamed Rice", r:53}, {n:"Belvast Eel", r:36}, {n:"Mixed Vegetables", r:11}]},
        {name: "Lunch Box of Memories", method: "Mixing", ingredients: [{n:"Steamed Rice", r:50}, {n:"Fried Egg", r:30}, {n:"Cooking Potion", r:20}]},
        {name: "Strawberry Milk", method: "Mixing", ingredients: [{n:"Strawberry", r:30}, {n:"Milk", r:65}, {n:"Sugar", r:5}]},
        {name: "Lemonade", method: "Mixing", ingredients: [{n:"Lemon", r:60}, {n:"Berry", r:30}, {n:"Sugar", r:10}]},
        {name: "Macchiato", method: "Mixing", ingredients: [{n:"Espresso", r:40}, {n:"Steamed Milk", r:40}, {n:"Whipped Cream", r:20}]},
        {name: "Brifne Rocks", method: "Mixing", ingredients: [{n:"Ice", r:57}, {n:"Brifne Whiskey", r:40}, {n:"Lemon", r:3}]},
        {name: "Apple Juice", method: "Mixing", ingredients: [{n:"Apple", r:73}, {n:"Berry", r:18}, {n:"Sugar", r:9}]},
        {name: "Iced Macchiato", method: "Mixing", ingredients: [{n:"Macchiato", r:50}, {n:"Whipped Cream", r:30}, {n:"Ice", r:20}]},
        {name: "Iced Cafe Mocha", method: "Mixing", ingredients: [{n:"Cafe Mocha", r:50}, {n:"Whipped Cream", r:30}, {n:"Ice", r:20}]},
        {name: "Espresso Macchiato", method: "Mixing", ingredients: [{n:"Espresso", r:50}, {n:"Steamed Milk", r:40}, {n:"Bottled Water", r:10}]},
        {name: "Orange Juice", method: "Mixing", ingredients: [{n:"Orange", r:72}, {n:"Berry", r:18}, {n:"Sugar", r:9}]},
        {name: "Chocolate Milk", method: "Mixing", ingredients: [{n:"Chocolate", r:45}, {n:"Milk", r:42}, {n:"Sugar", r:13}]},
        {name: "Cafe Mocha", method: "Mixing", ingredients: [{n:"Espresso", r:40}, {n:"Steamed Milk", r:50}, {n:"Baking Chocolate", r:10}]},
        {name: "Cappuccino", method: "Mixing", ingredients: [{n:"Espresso", r:30}, {n:"Milk", r:30}, {n:"Steamed Milk", r:40}]},
        {name: "BnR", method: "Mixing", ingredients: [{n:"Leighean Gin", r:36}, {n:"Brifne Whiskey", r:37}, {n:"Ice", r:27}]},
        {name: "Leighean Sling", method: "Mixing", ingredients: [{n:"Lemonade", r:73}, {n:"Leighean Gin", r:19}, {n:"Sugar", r:8}]},
        {name: "Red Sunrise", method: "Mixing", ingredients: [{n:"Orange Juice", r:60}, {n:"Brifne Whiskey", r:25}, {n:"Sugar", r:15}]},
        {name: "Lutra Cocktail Set", method: "Mixing", ingredients: [{n:"Leighean Sling", r:34}, {n:"Red Sunrise", r:33}, {n:"Screwdriver", r:33}]},
        {name: "Vales Fire", method: "Mixing", ingredients: [{n:"Vales Whiskey", r:70}, {n:"Ice", r:30}]},
        {name: "Screwdriver", method: "Mixing", ingredients: [{n:"Orange Juice", r:75}, {n:"Brifne Whiskey", r:20}, {n:"Lemon", r:5}]},
        {name: "Kiss on the Lips", method: "Mixing", ingredients: [{n:"Brifne Whiskey", r:55}, {n:"Lemonade", r:32}, {n:"Sugar", r:13}]},
        {name: "Nares Cake Set", method: "Mixing", ingredients: [{n:"Coconut Pound Cake", r:34}, {n:"Gateau Au Chocolat", r:33}, {n:"Rare Cheesecake", r:33}]},
        {name: "Rare Cheesecake", method: "Mixing", ingredients: [{n:"Block of Cheese", r:50}, {n:"Butter Biscuit", r:30}, {n:"Whipped Cream", r:20}]},
        {name: "Cheese Bread", method: "Baking", ingredients: [{n:"Bread", r:80}, {n:"Slice of Cheese", r:20}]},
        {name: "Curry Bread", method: "Baking", ingredients: [{n:"Bread", r:70}, {n:"Curry Powder", r:20}, {n:"Sliced Meat", r:10}]},
        {name: "Filia Cookie Set", method: "Mixing", ingredients: [{n:"Mushroom Cookie", r:34}, {n:"Coconut Cookie", r:33}, {n:"Chocolate Chip Cookie", r:33}]},
        {name: "Tomato Spaghetti", method: "Mixing", ingredients: [{n:"Long Pasta", r:60}, {n:"Tomato Sauce", r:30}, {n:"Pepper", r:10}]},
        {name: "Seafood Spaghetti", method: "Mixing", ingredients: [{n:"Long Pasta", r:60}, {n:"Seafood Sauce", r:30}, {n:"Pepper", r:10}]},
        {name: "Camellia Sling", method: "Mixing", ingredients: [{n:"Vales Whiskey", r:50}, {n:"Camellia Seed", r:40}, {n:"Bottled Water", r:10}]},
        {name: "Curry-Roasted Black Sea Bream", method: "Baking", ingredients: [{n:"Black Sea Bream", r:80}, {n:"Curry Powder", r:10}, {n:"Salt", r:10}]},
        {name: "Fried Egg", method: "Baking", ingredients: [{n:"Egg", r:90}, {n:"Salt", r:10}]},
        {name: "Roasted Chicken Wing", method: "Baking", ingredients: [{n:"Chicken Wings", r:79}, {n:"Olive Oil", r:21}]},
        {name: "Roasted Chicken", method: "Baking", ingredients: [{n:"Chicken Wings", r:73}, {n:"Thyme", r:18}, {n:"Salt", r:9}]},
        {name: "Grilled Catfish", method: "Baking", ingredients: [{n:"Catfish", r:80}, {n:"Cabbage", r:20}]},
        {name: "Roasted Bacon", method: "Baking", ingredients: [{n:"Bacon", r:90}, {n:"Salt", r:10}]},
        {name: "Broiled Brifne Carp", method: "Baking", ingredients: [{n:"Brifne Carp", r:84}, {n:"Olive Oil", r:11}, {n:"Salt", r:5}]},
        {name: "Grilled Silk-Striped Marlin", method: "Baking", ingredients: [{n:"Silk-Striped Marlin", r:85}, {n:"Olive Oil", r:10}, {n:"Salt", r:5}]},
        {name: "Taitinn Carp Brochette", method: "Baking", ingredients: [{n:"Taitinn Carp", r:80}, {n:"Thyme", r:10}, {n:"Lemon", r:10}]},
        {name: "Salt Grilled Sweetfish", method: "Baking", ingredients: [{n:"Sweetfish", r:85}, {n:"Salt", r:10}, {n:"Lemon", r:5}]},
        {name: "Grilled Eel", method: "Baking", ingredients: [{n:"Lamprey", r:90}, {n:"Salt", r:10}]},
        {name: "Grilled Shellfish", method: "Baking", ingredients: [{n:"Shellfish", r:90}, {n:"Salt or Pepper", r:10}]},
        {name: "Curry-Roasted Red Sea Bream", method: "Baking", ingredients: [{n:"Red Sea Bream", r:80}, {n:"Curry Powder", r:10}, {n:"Salt", r:10}]},
        {name: "Baked Potato", method: "Baking", ingredients: [{n:"Potato", r:90}, {n:"Salt or Pepper", r:10}]},
        {name: "Smoked Sunfish", method: "Baking", ingredients: [{n:"Sunfish", r:80}, {n:"Pepper", r:10}, {n:"Salt", r:10}]},
        {name: "Butter Grilled Reef Lobster", method: "Baking", ingredients: [{n:"Reef Lobster", r:80}, {n:"Garlic", r:10}, {n:"Butter", r:10}]},
        {name: "Strawberry Jam & Toast", method: "Baking", ingredients: [{n:"Milk Bread", r:70}, {n:"Strawberry Jam", r:20}, {n:"Butter", r:10}]},
        {name: "Garlic Bread", method: "Baking", ingredients: [{n:"Bread", r:85}, {n:"Garlic", r:15}]},
        {name: "Barley Bread", method: "Baking", ingredients: [{n:"Barley Flour", r:55}, {n:"Bottled Water", r:35}, {n:"Yeast", r:10}]},
        {name: "Sliced Bread", method: "Baking", ingredients: [{n:"Flour Dough", r:83}, {n:"Butter", r:17}]},
        {name: "Corn Scone", method: "Baking", ingredients: [{n:"Flour Dough", r:60}, {n:"Corn", r:30}, {n:"Whipped Cream", r:10}]},
        {name: "Cornbread", method: "Baking", ingredients: [{n:"Cornbread Dough", r:70}, {n:"Egg", r:20}, {n:"Yeast", r:10}]},
        {name: "Milk Bread", method: "Baking", ingredients: [{n:"Flour Dough", r:60}, {n:"Milk", r:30}, {n:"Butter", r:10}]},
        {name: "Croque Monsieur", method: "Baking", ingredients: [{n:"Sliced Bread", r:50}, {n:"Sliced Meat", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Club Sandwich", method: "Mixing", ingredients: [{n:"Sliced Bread", r:50}, {n:"Tomato", r:30}, {n:"Cabbage", r:20}]},
        {name: "Quiche", method: "Baking", ingredients: [{n:"Block of Cheese", r:50}, {n:"Fried Onion", r:30}, {n:"Egg", r:20}]},
        {name: "Toast", method: "Baking", ingredients: [{n:"Sliced Bread", r:85}, {n:"Butter", r:15}]},
        {name: "Gateau Au Chocolat", method: "Baking", ingredients: [{n:"Wheat Flour", r:40}, {n:"Chocolate", r:40}, {n:"Egg", r:20}]},
        {name: "Kikiki Mushroom Cookie", method: "Baking", ingredients: [{n:"Mushroom Cookie", r:50}, {n:"Cooking Potion", r:30}, {n:"Brown Pine Mushroom", r:20}]},
        {name: "Mushroom Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:60}, {n:"Hazelnut Mushroom", r:30}, {n:"Whipped Cream", r:10}]},
        {name: "Butter Biscuit", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Butter", r:30}, {n:"Sugar", r:20}]},
        {name: "Brownie", method: "Baking", ingredients: [{n:"Chocolate", r:50}, {n:"Wheat Flour", r:30}, {n:"Yeast", r:20}]},
        {name: "Chocolate Chip Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Baking Chocolate", r:30}, {n:"Butter", r:20}]},
        {name: "Coconut Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Coconut", r:30}, {n:"Butter", r:20}]},
        {name: "Coconut Pound Cake", method: "Baking", ingredients: [{n:"Flour Dough", r:50}, {n:"Coconut", r:30}, {n:"Egg", r:20}]},
        {name: "T-Bone Steak", method: "Baking", ingredients: [{n:"Large Meat", r:80}, {n:"Thyme", r:10}, {n:"Salt", r:10}]},
        {name: "Beef Steak", method: "Baking", ingredients: [{n:"Beef", r:80}, {n:"Garlic", r:10}, {n:"Pepper", r:10}]},
        {name: "Show-off Steak", method: "Baking", ingredients: [{n:"Beef Steak", r:50}, {n:"Whipped Cream", r:30}, {n:"Cooking Potion", r:20}]},
        {name: "Sturgeon Steak", method: "Baking", ingredients: [{n:"Sturgeon", r:80}, {n:"Lemon", r:10}, {n:"Pepper", r:10}]},
        {name: "Striped Marlin Steak", method: "Baking", ingredients: [{n:"Striped Marlin", r:80}, {n:"Pepper", r:10}, {n:"Salt", r:10}]},
        {name: "Mackerel Steak", method: "Baking", ingredients: [{n:"Mackerel", r:80}, {n:"Salt", r:10}, {n:"Pepper", r:10}]},
        {name: "Flying Fish Crepe", method: "Baking", ingredients: [{n:"Flying Fish", r:50}, {n:"Potato", r:30}, {n:"Egg", r:20}]},
        {name: "Mushroom Gratin", method: "Baking", ingredients: [{n:"Hazelnut Mushroom", r:50}, {n:"Onion", r:30}, {n:"Block of Cheese", r:20}]},
        {name: "Roasted Coffee", method: "Baking", ingredients: [{n:"Courcle Coffee Beans", r:90}, {n:"Bottled Water", r:10}]},
        {name: "Omelet", method: "Baking", ingredients: [{n:"Egg", r:50}, {n:"Mixed Vegetables", r:30}, {n:"Bacon", r:20}]},
        {name: "Cheese Gratin", method: "Baking", ingredients: [{n:"Block of Cheese", r:50}, {n:"Cheese Bread", r:30}, {n:"Egg", r:20}]},
        {name: "Braised Catfish and Clams", method: "Simmering", ingredients: [{n:"Catfish", r:50}, {n:"Shellfish", r:40}, {n:"Garlic", r:10}]},
        {name: "Steamed Mushroom", method: "Steaming", ingredients: [{n:"Hazelnut Mushroom", r:80}, {n:"Bottled Water", r:15}, {n:"Salt", r:5}]},
        {name: "Steamed Shark Fin", method: "Simmering", ingredients: [{n:"Mako Shark", r:70}, {n:"Bottled Water", r:20}, {n:"Celery", r:10}]},
        {name: "Steamed Brifne Carp", method: "Steaming", ingredients: [{n:"Brifne Carp", r:75}, {n:"Bottled Water", r:17}, {n:"Salt", r:8}]},
        {name: "Steamed Trout", method: "Simmering", ingredients: [{n:"Rainbow Trout", r:70}, {n:"Bottled Water", r:20}, {n:"Thyme", r:10}]},
        {name: "Braised Angler Fish", method: "Simmering", ingredients: [{n:"Angler Fish", r:60}, {n:"Celery", r:20}, {n:"Red Pepper Powder", r:20}]},
        {name: "Steamed Corn", method: "Simmering", ingredients: [{n:"Corn", r:80}, {n:"Bottled Water", r:20}]},
        {name: "Coq Au Vin", method: "Simmering", ingredients: [{n:"Chicken Wings", r:70}, {n:"Emain Macha Wine", r:20}, {n:"Thyme", r:10}]},
        {name: "Steamed Potato", method: "Simmering", ingredients: [{n:"Bottled Water", r:60}, {n:"Potato", r:35}, {n:"Salt", r:5}]},
        {name: "Hard-Boiled Egg", method: "Simmering", ingredients: [{n:"Bottled Water", r:60}, {n:"Egg", r:35}, {n:"Salt", r:5}]},
        {name: "Curry Rice", method: "Simmering", ingredients: [{n:"Steamed Rice", r:50}, {n:"Curry Paste", r:40}, {n:"Butter", r:10}]},
        {name: "Ray Gill Filet", method: "Boiling", ingredients: [{n:"Ray", r:70}, {n:"Bottled Water", r:20}, {n:"Garlic", r:10}]},
        {name: "Poisonous Mushroom Stew", method: "Boiling", ingredients: [{n:"Brown Pine Mushroom", r:60}, {n:"Brifne Whiskey", r:40}]},
        {name: "Mushroom Cappuccino Soup", method: "Boiling", ingredients: [{n:"Hazelnut Mushroom", r:70}, {n:"Emain Macha Wine", r:20}, {n:"Pepper", r:10}]},
        {name: "Mushroom Consomme", method: "Boiling", ingredients: [{n:"Hazelnut Mushroom", r:70}, {n:"Onion", r:20}, {n:"Salt or Pepper", r:10}]},
        {name: "Mushroom Potage", method: "Boiling", ingredients: [{n:"Hazelnut Mushroom", r:70}, {n:"Whipped Cream", r:20}, {n:"Salt or Pepper", r:10}]},
        {name: "Shark Fin Soup", method: "Boiling", ingredients: [{n:"Shrimp", r:40}, {n:"Egg", r:30}, {n:"Carnivorous Fish", r:30}]},
        {name: "Abb Neagh Carp Stew", method: "Boiling", ingredients: [{n:"Abb Neagh Carp", r:50}, {n:"Rice", r:30}, {n:"Bottled Water", r:20}]},
        {name: "Vegetable Soup", method: "Boiling", ingredients: [{n:"Fried Vegetables", r:60}, {n:"Whipped Cream", r:30}, {n:"Pepper", r:10}]},
        {name: "Button Mushroom Soup", method: "Boiling", ingredients: [{n:"Fried Button Mushrooms", r:60}, {n:"Whipped Cream", r:30}, {n:"Pepper", r:10}]},
        {name: "Onion Soup", method: "Boiling", ingredients: [{n:"Fried Onion", r:60}, {n:"Whipped Cream", r:30}, {n:"Salt", r:10}]},
        {name: "Corn Soup", method: "Boiling", ingredients: [{n:"Whipped Cream", r:50}, {n:"Fried Vegetables", r:30}, {n:"Corn", r:20}]},
        {name: "Taitinn Carp Stew", method: "Boiling", ingredients: [{n:"Taitinn Carp", r:60}, {n:"Potato", r:30}, {n:"Garlic", r:10}]},
        {name: "Pine Nut Soup", method: "Boiling", ingredients: [{n:"Pine Nut", r:60}, {n:"Steamed Rice", r:30}, {n:"Salt", r:10}]},
        {name: "Chicken Noodle Consomme", method: "Boiling", ingredients: [{n:"Consomme", r:40}, {n:"Noodle", r:30}, {n:"Chicken Wings", r:30}]},
        {name: "Coconut Crab Soup", method: "Boiling", ingredients: [{n:"Braised King Crab", r:50}, {n:"Coconut", r:30}, {n:"Steamed Mushroom", r:20}]},
        {name: "Consomme", method: "Boiling", ingredients: [{n:"Mixed Vegetables", r:50}, {n:"Sliced Meat", r:30}, {n:"Emain Macha Wine", r:20}]},
        {name: "Braised King Crab", method: "Boiling", ingredients: [{n:"King Crab", r:80}, {n:"Celery", r:20}]},
        {name: "Beltfish Stew", method: "Boiling", ingredients: [{n:"Beltfish", r:60}, {n:"Potato", r:30}, {n:"Garlic", r:10}]},
        {name: "Lemon Tea", method: "Boiling", ingredients: [{n:"Bottled Water", r:80}, {n:"Lemon", r:15}, {n:"Sugar", r:5}]},
        {name: "Basil Tea", method: "Boiling", ingredients: [{n:"Basil", r:20}, {n:"Bottled Water", r:80}]},
        {name: "Barley Tea", method: "Boiling", ingredients: [{n:"Bottled Water", r:90}, {n:"Barley Flour", r:10}]},
        {name: "Steamed Milk", method: "Boiling", ingredients: [{n:"Milk", r:90}, {n:"Bottled Water", r:10}]},
        {name: "Espresso", method: "Boiling", ingredients: [{n:"Bottled Water", r:90}, {n:"Roasted Coffee", r:10}]},
        {name: "Corn Tea", method: "Boiling", ingredients: [{n:"Bottled Water", r:80}, {n:"Steamed Corn", r:20}]},
        {name: "Thyme Tea", method: "Boiling", ingredients: [{n:"Bottled Water", r:90}, {n:"Thyme", r:10}]},
        {name: "Hot Chocolate", method: "Boiling", ingredients: [{n:"Chocolate", r:70}, {n:"Steamed Milk", r:20}, {n:"Whipped Cream", r:10}]},
        {name: "Spicy Fish Stew", method: "Boiling", ingredients: [{n:"Golden Scale Fish", r:50}, {n:"Taitinn Carp", r:40}, {n:"Red Pepper Powder", r:10}]},
        {name: "Tear Noodles", method: "Boiling", ingredients: [{n:"Noodle", r:60}, {n:"Red Pepper Powder", r:30}, {n:"Cooking Potion", r:10}]},
        {name: "Rock Bream Fish Stew", method: "Boiling", ingredients: [{n:"Black Sea Bream", r:45}, {n:"Red Sea Bream", r:45}, {n:"Red Pepper Powder", r:10}]},
        {name: "Heartbeat Gateau Au Chocolat", method: "Boiling", ingredients: [{n:"Gateau Au Chocolat", r:50}, {n:"Cooking Potion", r:30}, {n:"Vales Whiskey", r:20}]},
        {name: "Steamed Rice", method: "Boiling", ingredients: [{n:"Rice", r:60}, {n:"Bottled Water", r:40}]},
        {name: "Fish Soup", method: "Boiling", ingredients: [{n:"Blowfish", r:60}, {n:"Bottled Water", r:30}, {n:"Garlic", r:10}]},
        {name: "Bouillabaisse", method: "Boiling", ingredients: [{n:"Taitinn Carp", r:40}, {n:"Shrimp", r:40}, {n:"Emain Macha Wine", r:20}]},
        {name: "Juniper Jelly", method: "Boiling", ingredients: [{n:"Juniper Berry", r:70}, {n:"Sugar", r:30}]},
        {name: "Cheese Fondue", method: "Boiling", ingredients: [{n:"Slice of Cheese", r:50}, {n:"Potato", r:30}, {n:"Sliced Meat", r:20}]},
        {name: "Crazy Chocolate Ball", method: "Boiling", ingredients: [{n:"Baking Chocolate", r:60}, {n:"Cooking Potion", r:30}, {n:"Pepper", r:10}]},
        {name: "Spicy Red Sea Bream Stew", method: "Boiling", ingredients: [{n:"Red Sea Bream", r:70}, {n:"Bottled Water", r:20}, {n:"Red Pepper Powder", r:10}]},
        {name: "French Fries", method: "Deep-frying", ingredients: [{n:"Potato", r:80}, {n:"Fry Batter", r:15}, {n:"Salt", r:5}]},
        {name: "Fried Chicken Wing", method: "Deep-frying", ingredients: [{n:"Chicken Wings", r:80}, {n:"Fry Batter", r:15}, {n:"Salt", r:5}]},
        {name: "Tempura Plate", method: "Deep-frying", ingredients: [{n:"Mixed Vegetables", r:50}, {n:"Bacon", r:30}, {n:"Fry Batter", r:20}]},
        {name: "Fried Smelt", method: "Deep-frying", ingredients: [{n:"Smelt", r:80}, {n:"Fry Batter", r:15}, {n:"Salt", r:5}]},
        {name: "Fried Shrimp", method: "Deep-frying", ingredients: [{n:"Shrimp", r:80}, {n:"Fry Batter", r:15}, {n:"Salt", r:5}]},
        {name: "Fried Abb Neagh Carp", method: "Deep-frying", ingredients: [{n:"Abb Neagh Carp", r:80}, {n:"Fry Batter", r:15}, {n:"Salt", r:5}]},
        {name: "Onion Ring", method: "Deep-frying", ingredients: [{n:"Onion", r:80}, {n:"Fry Batter", r:15}, {n:"Salt", r:5}]},
        {name: "Mushroom Marinade", method: "Stir-frying", ingredients: [{n:"Hazelnut Mushroom", r:60}, {n:"Coconut", r:20}, {n:"Fry Batter", r:20}]},
        {name: "Corn Chip", method: "Deep-frying", ingredients: [{n:"Cornbread Dough", r:80}, {n:"Salt", r:20}]},
        {name: "Fish and Chips", method: "Deep-frying", ingredients: [{n:"Taitinn Carp", r:50}, {n:"Potato", r:30}, {n:"Fry Batter", r:20}]},
        {name: "Fried Vegetables", method: "Stir-frying", ingredients: [{n:"Cabbage", r:45}, {n:"Carrot", r:30}, {n:"Onion", r:25}]},
        {name: "Fried Button Mushrooms", method: "Stir-frying", ingredients: [{n:"Button Mushroom", r:80}, {n:"Garlic", r:15}, {n:"Salt", r:5}]},
        {name: "Fried Onion", method: "Stir-frying", ingredients: [{n:"Onion", r:80}, {n:"Garlic", r:15}, {n:"Salt", r:5}]},
        {name: "Pasta Marinara", method: "Stir-frying", ingredients: [{n:"Long Pasta", r:70}, {n:"Tomato", r:20}, {n:"Onion", r:10}]},
        {name: "Popcorn", method: "Stir-frying", ingredients: [{n:"Corn", r:80}, {n:"Butter", r:15}, {n:"Salt", r:5}]},
        {name: "Mixed Fried Rice", method: "Stir-frying", ingredients: [{n:"Steamed Rice", r:50}, {n:"Mixed Vegetables", r:30}, {n:"Bacon", r:20}]},
        {name: "Mushroom Fried Rice", method: "Stir-frying", ingredients: [{n:"Steamed Rice", r:50}, {n:"Mixed Vegetables", r:30}, {n:"Button Mushroom", r:20}]},
        {name: "Shrimp Fried Rice", method: "Stir-frying", ingredients: [{n:"Steamed Rice", r:60}, {n:"Shrimp", r:30}, {n:"Egg", r:10}]},
        {name: "Friendship Shrimp Fried Rice", method: "Stir-frying", ingredients: [{n:"Shrimp Fried Rice", r:60}, {n:"Fried Shrimp", r:30}, {n:"Cooking Potion", r:10}]},
        {name: "Strawberry Jam", method: "Jam Making", ingredients: [{n:"Strawberry", r:60}, {n:"Sugar", r:35}, {n:"Lemon Juice", r:5}]},
        {name: "Peanut Butter Jam", method: "Jam Making", ingredients: [{n:"Peanuts", r:65}, {n:"Olive Oil", r:30}, {n:"Salt", r:5}]},
        {name: "Apple Jam", method: "Jam Making", ingredients: [{n:"Apple", r:65}, {n:"Sugar", r:30}, {n:"Salt", r:5}]},
        {name: "Grape Jam", method: "Jam Making", ingredients: [{n:"Grapes", r:65}, {n:"Sugar", r:35}]},
        {name: "Pumpkin Jam", method: "Jam Making", ingredients: [{n:"Ripe Pumpkin", r:70}, {n:"Sugar", r:25}, {n:"Lemon Juice", r:5}]},
        {name: "Apple Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:40}, {n:"Apple", r:45}, {n:"Sugar", r:15}]},
        {name: "Pecan Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:40}, {n:"Pecan", r:45}, {n:"Egg", r:15}]},
        {name: "Egg Tart", method: "Pie Making", ingredients: [{n:"Tart Crust", r:50}, {n:"Egg", r:40}, {n:"Bottled Water", r:10}]},
        {name: "Pumpkin Tart", method: "Pie Making", ingredients: [{n:"Tart Crust", r:50}, {n:"Ripe Pumpkin", r:40}, {n:"Whipped Cream", r:10}]},
        {name: "Grilled White Dragon Heart", method: "Baking", ingredients: [{n:"White Dragon Heart", r:80}, {n:"White Dragon Blood", r:15}, {n:"Dragon Flesh Lump", r:5}]},
        {name: "Grilled Black Dragon Heart", method: "Baking", ingredients: [{n:"Black Dragon Heart", r:80}, {n:"Black Dragon Blood", r:15}, {n:"Dragon Flesh Lump", r:5}]},
        {name: "Dragon T-Bone Steak", method: "Baking", ingredients: [{n:"Dragon Flesh Lump", r:80}, {n:"Dragon Bone", r:20}]},
        {name: "Dragon Blood White Wine", method: "Boiling", ingredients: [{n:"White Dragon Blood", r:80}, {n:"Dragon Flesh Lump", r:20}]},
        {name: "Dragon Blood Red Wine", method: "Boiling", ingredients: [{n:"Black Dragon Blood", r:80}, {n:"Dragon Flesh Lump", r:20}]},
        {name: "Rice Cake Soup", method: "Boiling", ingredients: [{n:"White Rice Cake", r:60}, {n:"Beef", r:30}, {n:"Egg", r:10}]},
        {name: "Large Rice Cake Soup", method: "Boiling", ingredients: [{n:"Rice Cake Soup", r:60}, {n:"White Rice Cake", r:30}, {n:"Egg", r:10}]},
        {name: "Jumbo Rice Cake Soup", method: "Boiling", ingredients: [{n:"Large Rice Cake Soup", r:60}, {n:"White Rice Cake", r:30}, {n:"Egg", r:10}]},
        {name: "Moon Cake", method: "Pie Making", ingredients: [{n:"Flour Dough", r:50}, {n:"Bean Stuffing", r:40}, {n:"Peanuts", r:10}]},
        {name: "Large Moon Cake", method: "Pie Making", ingredients: [{n:"Moon Cake", r:60}, {n:"Bean Stuffing", r:30}, {n:"Peanuts", r:10}]},
        {name: "Jumbo Moon Cake", method: "Pie Making", ingredients: [{n:"Large Moon Cake", r:60}, {n:"Bean Stuffing", r:30}, {n:"Peanuts", r:10}]},
        {name: "Halloween Pumpkin Candy", method: "Jam Making", ingredients: [{n:"Ripe Pumpkin", r:50}, {n:"Sugar", r:40}, {n:"Starch Syrup", r:10}]},
        {name: "Halloween Wrapped Candy", method: "Mixing", ingredients: [{n:"Halloween Pumpkin Candy", r:34}, {n:"Halloween Ghost Jelly", r:33}, {n:"Halloween Pumpkin Jelly", r:33}]},
        {name: "Halloween Pumpkin Chocolate", method: "Jam Making", ingredients: [{n:"Ripe Pumpkin", r:40}, {n:"Baking Chocolate", r:40}, {n:"Whipped Cream", r:20}]},
        {name: "Halloween Wrapped Cookie", method: "Mixing", ingredients: [{n:"Halloween Hat Cookie", r:34}, {n:"Halloween Star Cookie", r:33}, {n:"Halloween Owl Cookie", r:33}]},
        {name: "Halloween Pumpkin Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:40}, {n:"Sweet Pumpkin Puree", r:40}, {n:"Almond", r:20}]},
        {name: "Halloween Hat Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Butter", r:40}, {n:"Hat Cookie Cutter", r:10}]},
        {name: "Halloween Star Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Butter", r:40}, {n:"Star Cookie Cutter", r:10}]},
        {name: "Halloween Owl Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Butter", r:40}, {n:"Owl Cookie Cutter", r:10}]},
        {name: "Halloween Ghost Jelly", method: "Jam Making", ingredients: [{n:"Gelatin", r:80}, {n:"Lemon", r:20}]},
        {name: "Halloween Pumpkin Jelly", method: "Jam Making", ingredients: [{n:"Gelatin", r:80}, {n:"Ripe Pumpkin", r:20}]},
        {name: "Fried Dumplings", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Sliced Meat", r:40}, {n:"Leek", r:10}]},
        {name: "Large Fried Dumplings", method: "Baking", ingredients: [{n:"Fried Dumplings", r:60}, {n:"Sliced Meat", r:30}, {n:"Leek", r:10}]},
        {name: "Jumbo Fried Dumplings", method: "Baking", ingredients: [{n:"Large Fried Dumplings", r:60}, {n:"Sliced Meat", r:30}, {n:"Leek", r:10}]},
        {name: "Toasted Rice Cake", method: "Baking", ingredients: [{n:"White Rice Cake", r:100}]},
        {name: "Fortune Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:60}, {n:"Egg", r:30}, {n:"Butter", r:10}]},
        {name: "Roasted Turkey", method: "Baking", ingredients: [{n:"Turkey", r:90}, {n:"Olive Oil", r:10}]},
        {name: "Tara Sausage Sandwich", method: "Mixing", ingredients: [{n:"Garlic Bread", r:50}, {n:"Sausage", r:40}, {n:"Cabbage", r:10}]},
        {name: "Holiday Rice Cake", method: "Steaming", ingredients: [{n:"Rice", r:60}, {n:"Bottled Water", r:30}, {n:"Sugar", r:10}]},
        {name: "Truffle Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:60}, {n:"White Truffle", r:40}]},
        {name: "Chocolate Souffle", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Baking Chocolate", r:30}, {n:"Milk", r:20}]},
        {name: "Celery Salad", method: "Mixing", ingredients: [{n:"Celery", r:50}, {n:"Carrot", r:30}, {n:"Cabbage", r:20}]},
        {name: "Chicken Chow Mein", method: "Noodle Making", ingredients: [{n:"Noodle", r:60}, {n:"Chicken", r:30}, {n:"Bell Pepper", r:10}]},
        {name: "Grilled Corn", method: "Baking", ingredients: [{n:"Corn", r:90}, {n:"Butter", r:10}]},
        {name: "Triple Hotcakes", method: "Baking", ingredients: [{n:"Hotcakes", r:60}, {n:"Whipped Cream", r:20}, {n:"Berry", r:20}]},
        {name: "Chocolate Cake", method: "Baking", ingredients: [{n:"Wheat Flour", r:40}, {n:"Baking Chocolate", r:30}, {n:"Whipped Cream", r:30}]},
        {name: "Chicken Soup", method: "Simmering", ingredients: [{n:"Chicken", r:60}, {n:"Rice", r:30}, {n:"Bottled Water", r:10}]},
        {name: "Taffy Stick", method: "Jam Making", ingredients: [{n:"Rice", r:70}, {n:"Malt", r:20}, {n:"Bottled Water", r:10}]},
        {name: "Giant Star Candy", method: "Baking", ingredients: [{n:"Sugar", r:80}, {n:"Bottled Water", r:15}, {n:"Cooking Potion", r:5}]},
        {name: "Simmered Sweet Potato", method: "Simmering", ingredients: [{n:"Sweet Potato", r:80}, {n:"Bottled Water", r:20}]},
        {name: "Simmered Beans", method: "Simmering", ingredients: [{n:"Bean", r:80}, {n:"Bottled Water", r:20}]},
        {name: "Simmered Octopus", method: "Simmering", ingredients: [{n:"Octopus", r:80}, {n:"Bottled Water", r:20}]},
        {name: "Simmered Cabbage", method: "Simmering", ingredients: [{n:"Cabbage", r:80}, {n:"Bottled Water", r:20}]},
        {name: "Simmered Chestnuts", method: "Simmering", ingredients: [{n:"Chestnut", r:80}, {n:"Bottled Water", r:20}]},
        {name: "White Rice Cake", method: "Steaming", ingredients: [{n:"Rice", r:80}, {n:"Bottled Water", r:20}]},
        {name: "Meat Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:40}, {n:"Large Meat", r:40}, {n:"Meat Marinade", r:20}]},
        {name: "Hotcakes", method: "Baking", ingredients: [{n:"Wheat Flour", r:70}, {n:"Milk", r:20}, {n:"Sugar", r:10}]},
        {name: "Sausage", method: "Baking", ingredients: [{n:"Sliced Meat", r:70}, {n:"Wheat Flour", r:20}, {n:"Onion", r:10}]},
        {name: "Seafood Yakisoba", method: "Noodle Making", ingredients: [{n:"Noodle", r:60}, {n:"Mixed Vegetables", r:20}, {n:"Shellfish", r:20}]},
        {name: "Pad Thai", method: "Noodle Making", ingredients: [{n:"Noodle", r:60}, {n:"Mixed Vegetables", r:30}, {n:"Soy Sauce", r:10}]},
        {name: "Shrimp Tempura Udon", method: "Noodle Making", ingredients: [{n:"Noodle", r:60}, {n:"Fried Shrimp", r:20}, {n:"Meat Broth", r:20}]},
        {name: "Roasted Bean Noodles", method: "Noodle Making", ingredients: [{n:"Somen Noodles", r:80}, {n:"Roasted Bean Broth", r:20}]},
        {name: "Peeled Bean Noodles", method: "Noodle Making", ingredients: [{n:"Somen Noodles", r:80}, {n:"Peeled Bean Broth", r:20}]},
        {name: "Water-soaked Bean Noodles", method: "Noodle Making", ingredients: [{n:"Somen Noodles", r:80}, {n:"Water-soaked Bean Broth", r:20}]},
        {name: "Festive Noodles", method: "Noodle Making", ingredients: [{n:"Somen Noodles", r:60}, {n:"Mixed Vegetables", r:20}, {n:"Meat Broth", r:20}]},
        {name: "Curry Udon", method: "Noodle Making", ingredients: [{n:"Noodle", r:60}, {n:"Curry Powder", r:20}, {n:"Meat Broth", r:20}]},
        {name: "Tofu Noodles A", method: "Noodle Making", ingredients: [{n:"Somen Noodles", r:60}, {n:"Mashed Roasted Bean Powder Tofu", r:20}, {n:"Meat Broth", r:20}]},
        {name: "Tofu Noodles B", method: "Noodle Making", ingredients: [{n:"Somen Noodles", r:60}, {n:"Mashed Peeled Bean Powder Tofu", r:20}, {n:"Meat Broth", r:20}]},
        {name: "Tofu Noodles C", method: "Noodle Making", ingredients: [{n:"Somen Noodles", r:60}, {n:"Mashed Water-soaked Bean Powder Tofu", r:20}, {n:"Meat Broth", r:20}]},
        {name: "Steamed Egg Casserole", method: "Steaming", ingredients: [{n:"Egg", r:75}, {n:"Bottled Water", r:20}, {n:"Salt", r:5}]},
        {name: "Pork Galbi Stew", method: "Steaming", ingredients: [{n:"Large Meat", r:50}, {n:"Mixed Vegetables", r:30}, {n:"Meat Marinade", r:20}]},
        {name: "Pumpkin Galbi Stew", method: "Steaming", ingredients: [{n:"Sweet Pumpkin", r:50}, {n:"Sliced Meat", r:30}, {n:"Meat Marinade", r:20}]},
        {name: "Steamed Eggplants", method: "Steaming", ingredients: [{n:"Eggplant", r:80}, {n:"Salt", r:10}, {n:"Garlic", r:10}]},
        {name: "Pumpkin Seafood Stew", method: "Steaming", ingredients: [{n:"Sweet Pumpkin", r:50}, {n:"Poulp", r:30}, {n:"Shrimp", r:20}]},
        {name: "Vegetable Steamed Chicken", method: "Steaming", ingredients: [{n:"Chicken", r:50}, {n:"Mixed Vegetables", r:30}, {n:"Meat Marinade", r:20}]},
        {name: "Steamed Dumplings", method: "Steaming", ingredients: [{n:"Wheat Flour", r:50}, {n:"Sliced Meat", r:40}, {n:"Leek", r:10}]},
        {name: "Steamed Cabbage and Beans", method: "Steaming", ingredients: [{n:"Cabbage", r:45}, {n:"Bean", r:45}, {n:"Bottled Water", r:10}]},
        {name: "Spaghetti Aglio e Olio", method: "Pasta Making", ingredients: [{n:"Long Pasta", r:80}, {n:"Olive Oil", r:15}, {n:"Garlic", r:5}]},
        {name: "Carbonara", method: "Pasta Making", ingredients: [{n:"Long Pasta", r:70}, {n:"Whipped Cream", r:20}, {n:"Pasta Ingredients", r:10}]},
        {name: "Amatriciana", method: "Pasta Making", ingredients: [{n:"Short Pasta", r:70}, {n:"Tomato Sauce", r:20}, {n:"Spicy Pepper", r:10}]},
        {name: "Spaghetti alle Vongole", method: "Pasta Making", ingredients: [{n:"Short Pasta", r:70}, {n:"Olive Oil", r:20}, {n:"Shellfish", r:10}]},
        {name: "Pane", method: "Pasta Making", ingredients: [{n:"Bread", r:40}, {n:"Long Pasta", r:40}, {n:"Whipped Cream", r:20}]},
        {name: "Walnut Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:40}, {n:"Walnut", r:45}, {n:"Butter", r:15}]},
        {name: "Sweet Potato Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:40}, {n:"Sweet Potato", r:45}, {n:"Egg", r:15}]},
        {name: "Almond Pie", method: "Pie Making", ingredients: [{n:"Pan Pie Crust", r:40}, {n:"Almond", r:45}, {n:"Egg", r:15}]},
        {name: "Almond Strawberry Jam Tart", method: "Pie Making", ingredients: [{n:"Tart Crust", r:50}, {n:"Strawberry Jam", r:40}, {n:"Almond", r:10}]},
        {name: "Blueberry Jam", method: "Jam Making", ingredients: [{n:"Blueberry", r:70}, {n:"Sugar", r:30}]},
        {name: "Orange Marmalade", method: "Jam Making", ingredients: [{n:"Orange", r:60}, {n:"Sugar", r:35}, {n:"Bottled Water", r:5}]},
        {name: "Lemon Jam", method: "Jam Making", ingredients: [{n:"Lemon", r:65}, {n:"Sugar", r:35}]},
        {name: "Pasta Ingredients", method: "Stir-frying", ingredients: [{n:"Onion", r:50}, {n:"Garlic", r:25}, {n:"Bacon", r:25}]},
        {name: "Fried Sausage Vegetables", method: "Stir-frying", ingredients: [{n:"Sausage", r:50}, {n:"Onion", r:30}, {n:"Carrot", r:20}]},
        {name: "Fried Eggplants", method: "Stir-frying", ingredients: [{n:"Eggplant", r:80}, {n:"Onion", r:15}, {n:"Salt", r:5}]},
        {name: "Fried Poulp", method: "Stir-frying", ingredients: [{n:"Poulp", r:60}, {n:"Cabbage", r:30}, {n:"Red Pepper Powder", r:10}]},
        {name: "Sweet Potato Fries", method: "Deep-frying", ingredients: [{n:"Sweet Potato", r:80}, {n:"Fry Batter", r:20}]},
        {name: "Potato Croquette", method: "Deep-frying", ingredients: [{n:"Steamed Potato", r:60}, {n:"Sliced Meat", r:20}, {n:"Bread Crumb", r:20}]},
        {name: "Glazed Sweet Potatoes", method: "Deep-frying", ingredients: [{n:"Sweet Potato", r:80}, {n:"Sugar", r:20}]},
        {name: "Pork Cutlet", method: "Deep-frying", ingredients: [{n:"Sliced Meat", r:60}, {n:"Bread Crumb", r:20}, {n:"Egg", r:20}]},
        {name: "Schweinshaxe", method: "Baking", ingredients: [{n:"Large Meat", r:50}, {n:"Sauerkraut", r:30}, {n:"French Fries", r:20}]},
        {name: "Tofu Steak", method: "Baking", ingredients: [{n:"Magic Bean Tofu", r:70}, {n:"Olive Oil", r:20}, {n:"Worcestershire Sauce", r:10}]},
        {name: "Grilled Salted Herring", method: "Baking", ingredients: [{n:"Herring", r:80}, {n:"Salt", r:15}, {n:"Lemon Juice", r:5}]},
        {name: "Gyeran-mari", method: "Baking", ingredients: [{n:"Egg", r:80}, {n:"Butter", r:10}, {n:"Sugar", r:10}]},
        {name: "Truffle Omelet", method: "Baking", ingredients: [{n:"Egg", r:70}, {n:"White Truffle", r:15}, {n:"Mixed Vegetables", r:15}]},
        {name: "S'more", method: "Baking", ingredients: [{n:"Marshmallow", r:60}, {n:"Chocolate Chip Cookie", r:40}]},
        {name: "Churrasco", method: "Baking", ingredients: [{n:"Handmade Sirloin Ham", r:40}, {n:"Chicken", r:30}, {n:"Sausage", r:30}]},
        {name: "Gochujang Pork Bulgogi", method: "Baking", ingredients: [{n:"Sliced Meat", r:70}, {n:"Gochujang", r:20}, {n:"Onion", r:10}]},
        {name: "Grilled Pineapple", method: "Baking", ingredients: [{n:"Pineapple", r:85}, {n:"Sugar", r:15}]},
        {name: "Pineapple Bacon Skewer", method: "Baking", ingredients: [{n:"Bacon", r:40}, {n:"Pineapple", r:40}, {n:"Shrimp", r:20}]},
        {name: "Green Plum Tea", method: "Boiling", ingredients: [{n:"Bottled Water", r:80}, {n:"Green Plum Syrup", r:20}]},
        {name: "Irish Stew", method: "Boiling", ingredients: [{n:"Sliced Meat", r:50}, {n:"Giant Potato", r:30}, {n:"Carrot", r:20}]},
        {name: "Tteok-bokki", method: "Boiling", ingredients: [{n:"White Rice Cake", r:50}, {n:"Gochujang", r:30}, {n:"Meat Broth", r:20}]},
        {name: "Gochujang Jjigae", method: "Boiling", ingredients: [{n:"Gochujang", r:40}, {n:"Potato", r:30}, {n:"Meat Broth", r:30}]},
        {name: "Assorted Sashimi Noodles", method: "Noodle Making", ingredients: [{n:"Assorted Sashimi", r:40}, {n:"Somen Noodles", r:40}, {n:"Meat Broth", r:20}]},
        {name: "Beltfish Sashimi Noodles", method: "Noodle Making", ingredients: [{n:"Beltfish", r:40}, {n:"Somen Noodles", r:40}, {n:"Cabbage", r:20}]},
        {name: "Pickled Eggs", method: "Fermenting", ingredients: [{n:"Hard-Boiled Egg", r:70}, {n:"Vinegar", r:20}, {n:"Sugar", r:10}]},
        {name: "Pickled Cucumbers", method: "Fermenting", ingredients: [{n:"Cucumber", r:70}, {n:"Bottled Water", r:20}, {n:"Vinegar", r:10}]},
        {name: "Plain Yogurt", method: "Fermenting", ingredients: [{n:"Milk", r:100}]},
        {name: "Honey Yogurt", method: "Fermenting", ingredients: [{n:"Milk", r:80}, {n:"Fresh Honey", r:20}]},
        {name: "Strawberry Yogurt", method: "Fermenting", ingredients: [{n:"Milk", r:80}, {n:"Strawberry Jam", r:20}]},
        {name: "Blueberry Yogurt", method: "Fermenting", ingredients: [{n:"Milk", r:80}, {n:"Blueberry Jam", r:20}]},
        {name: "Sauerkraut", method: "Fermenting", ingredients: [{n:"Cabbage", r:80}, {n:"Salt", r:10}, {n:"Vinegar", r:10}]},
        {name: "Umeboshi", method: "Fermenting", ingredients: [{n:"Green Plum", r:80}, {n:"Salt", r:10}, {n:"Sugar", r:10}]},
        {name: "Hakarl", method: "Fermenting", ingredients: [{n:"Carnivorous Fish", r:80}, {n:"Pepper", r:20}]},
        {name: "Natto", method: "Fermenting", ingredients: [{n:"Simmered Beans", r:80}, {n:"Soy Sauce", r:20}]},
        {name: "Pineapple Fried Rice", method: "Stir-frying", ingredients: [{n:"Steamed Rice", r:60}, {n:"Pineapple", r:30}, {n:"Worcestershire Sauce", r:10}]},
        {name: "Pulled Pork Sandwich", method: "Sous Vide", ingredients: [{n:"Large Meat", r:50}, {n:"Sliced Bread", r:30}, {n:"Mixed Vegetables", r:20}]},
        {name: "Moist Salmon Steak", method: "Sous Vide", ingredients: [{n:"Rano Salmon", r:80}, {n:"Olive Oil", r:15}, {n:"Thyme", r:5}]},
        {name: "Chicken Breast Salad", method: "Sous Vide", ingredients: [{n:"Chicken", r:60}, {n:"Celery Salad", r:30}, {n:"Wine Vinegar", r:10}]},
        {name: "Warm Hot Spring Egg", method: "Sous Vide", ingredients: [{n:"Egg", r:80}, {n:"Bottled Water", r:10}, {n:"Soy Sauce", r:10}]},
        {name: "Strip Steak", method: "Sous Vide", ingredients: [{n:"Beef", r:70}, {n:"Fried Vegetables", r:20}, {n:"Worcestershire Sauce", r:10}]},
        {name: "Handmade Sirloin Ham", method: "Sous Vide", ingredients: [{n:"Large Meat", r:80}, {n:"Pepper", r:10}, {n:"Butter", r:10}]},
        {name: "Grilled Mackerel with Curry", method: "Sous Vide", ingredients: [{n:"Mackerel", r:70}, {n:"Curry Powder", r:20}, {n:"Wheat Flour", r:10}]},
        {name: "Chicken Breast Yurinki", method: "Sous Vide", ingredients: [{n:"Chicken", r:60}, {n:"Spicy Pepper", r:20}, {n:"Cabbage", r:20}]},
        {name: "Sous Vide Galbi-jjim", method: "Sous Vide", ingredients: [{n:"Beef", r:60}, {n:"Spicy Pepper", r:20}, {n:"Meat Marinade", r:20}]},
        {name: "Mackerel Jorim", method: "Sous Vide", ingredients: [{n:"Mackerel", r:60}, {n:"Soy Sauce", r:30}, {n:"Lemon Juice", r:10}]},
        {name: "Bossam", method: "Sous Vide", ingredients: [{n:"Large Meat", r:60}, {n:"Leek", r:20}, {n:"Cabbage", r:20}]},
        {name: "Gelatinous Custard Pudding", method: "Sous Vide", ingredients: [{n:"Egg", r:50}, {n:"Milk", r:30}, {n:"Whipped Cream", r:20}]},
        {name: "Mushroom Jangjorim", method: "Sous Vide", ingredients: [{n:"Sliced Meat", r:50}, {n:"Hazelnut Mushroom", r:30}, {n:"Soy Sauce", r:20}]},
        {name: "Oyakodon", method: "Sous Vide", ingredients: [{n:"Chicken", r:40}, {n:"Egg", r:30}, {n:"Steamed Rice", r:30}]},
        {name: "Salmon Oyakodon", method: "Sous Vide", ingredients: [{n:"Rano Salmon", r:50}, {n:"Steamed Rice", r:40}, {n:"Lemon", r:10}]},
        {name: "Sous Vide Pasta Aglio e Olio", method: "Sous Vide", ingredients: [{n:"Long Pasta", r:60}, {n:"Olive Oil", r:30}, {n:"Fan Mussel", r:10}]},
        {name: "Green Plum Syrup", method: "Jam Making", ingredients: [{n:"Green Plum", r:60}, {n:"Sugar", r:40}]},
        {name: "Shrimp Sashimi", method: "Julienning", ingredients: [{n:"Shrimp", r:90}, {n:"Chojang", r:10}]},
        {name: "Eel Sashimi", method: "Julienning", ingredients: [{n:"Belvast Eel", r:90}, {n:"Chojang", r:10}]},
        {name: "Tuna Sashimi", method: "Julienning", ingredients: [{n:"Yellowfin Tuna", r:90}, {n:"Chojang", r:10}]},
        {name: "Salmon Sashimi", method: "Julienning", ingredients: [{n:"Rano Salmon", r:90}, {n:"Chojang", r:10}]},
        {name: "Beltfish Sashimi", method: "Julienning", ingredients: [{n:"Beltfish", r:90}, {n:"Chojang", r:10}]},
        {name: "Korean Beef Tartare", method: "Julienning", ingredients: [{n:"Large Meat", r:80}, {n:"Egg", r:20}]},
        {name: "Blowfish Sashimi", method: "Julienning", ingredients: [{n:"Blowfish", r:80}, {n:"Antidote Potion", r:10}, {n:"Bottled Water", r:10}]},
        {name: "Trout Sashimi", method: "Julienning", ingredients: [{n:"Rainbow Trout", r:90}, {n:"Chojang", r:10}]},
        {name: "Reef Lobster Sashimi", method: "Julienning", ingredients: [{n:"Reef Lobster", r:80}, {n:"Soy Sauce", r:10}, {n:"Lemon Juice", r:10}]},
        {name: "Parboiled Octopus", method: "Julienning", ingredients: [{n:"Simmered Octopus", r:90}, {n:"Chojang", r:10}]},
        {name: "Assorted Sashimi", method: "Mixing", ingredients: [{n:"Salmon Sashimi", r:34}, {n:"Eel Sashimi", r:33}, {n:"Tuna Sashimi", r:33}]},
        {name: "Assorted Sashimi Bibimbap", method: "Mixing", ingredients: [{n:"Assorted Sashimi", r:50}, {n:"Steamed Rice", r:30}, {n:"Mixed Vegetables", r:20}]},
        {name: "Shish Kebab", method: "Julienning", ingredients: [{n:"Sliced Meat", r:50}, {n:"Bell Pepper", r:30}, {n:"Tomato", r:20}]},
        {name: "Iskender Kebab", method: "Julienning", ingredients: [{n:"Large Meat", r:60}, {n:"Bread", r:20}, {n:"Plain Yogurt", r:20}]},
        {name: "Picnic Chicken Kebab", method: "Julienning", ingredients: [{n:"Chicken", r:60}, {n:"Bell Pepper", r:20}, {n:"Tortilla", r:20}]},
        {name: "Burrito", method: "Julienning", ingredients: [{n:"Handmade Sirloin Ham", r:40}, {n:"Mixed Vegetables", r:30}, {n:"Tortilla", r:30}]},
        {name: "Gorgonzola", method: "Pizza Making", ingredients: [{n:"Plain Pizza Dough", r:50}, {n:"Block of Cheese", r:40}, {n:"Garlic", r:10}]},
        {name: "Margherita", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:60}, {n:"Basil", r:20}, {n:"Slice of Cheese", r:20}]},
        {name: "Calzone", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Bacon", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Sweet Potato Pizza", method: "Pizza Making", ingredients: [{n:"Plain Pizza Dough", r:50}, {n:"Sweet Potato", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Pepperoni Pizza", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Salami", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Fragrant Mushroom Pizza", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Hazelnut Mushroom", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Chocolate Pizza", method: "Pizza Making", ingredients: [{n:"Plain Pizza Dough", r:50}, {n:"Baking Chocolate", r:30}, {n:"Marshmallow", r:20}]},
        {name: "Shrimp Pizza", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Shrimp", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Steak Pizza", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Handmade Sirloin Ham", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Focaccia", method: "Pizza Making", ingredients: [{n:"Flour Dough", r:60}, {n:"Thyme", r:20}, {n:"Olive Oil", r:20}]},
        {name: "Spicy Chicken Pizza", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Chicken Wings", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Tara Deep Dish", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Block of Cheese", r:30}, {n:"Bell Pepper", r:20}]},
        {name: "Vegetable Pizza", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:50}, {n:"Mixed Vegetables", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Courcle Pizza", method: "Pizza Making", ingredients: [{n:"Red Sauce Pizza Dough", r:40}, {n:"Pineapple", r:40}, {n:"Handmade Sirloin Ham", r:20}]},
        {name: "Reuben Sandwich", method: "Mixing", ingredients: [{n:"Sliced Bread", r:40}, {n:"Salami", r:40}, {n:"Sauerkraut", r:20}]},
        {name: "Ebi Sushi", method: "Mixing", ingredients: [{n:"Shrimp Sashimi", r:50}, {n:"Steamed Rice", r:40}, {n:"Vinegar", r:10}]},
        {name: "Unagi Sushi", method: "Mixing", ingredients: [{n:"Eel Sashimi", r:50}, {n:"Steamed Rice", r:40}, {n:"Vinegar", r:10}]},
        {name: "Tamago Sushi", method: "Mixing", ingredients: [{n:"Gyeran-mari", r:50}, {n:"Steamed Rice", r:40}, {n:"Vinegar", r:10}]},
        {name: "Toro Sushi", method: "Mixing", ingredients: [{n:"Tuna Sashimi", r:50}, {n:"Steamed Rice", r:40}, {n:"Vinegar", r:10}]},
        {name: "Salmon Sushi", method: "Mixing", ingredients: [{n:"Salmon Sashimi", r:50}, {n:"Steamed Rice", r:40}, {n:"Vinegar", r:10}]},
        {name: "Lassi", method: "Mixing", ingredients: [{n:"Plain Yogurt", r:50}, {n:"Bottled Water", r:30}, {n:"Assorted Fruits", r:20}]},
        {name: "Coleslaw", method: "Mixing", ingredients: [{n:"Cabbage", r:60}, {n:"Mayonnaise", r:30}, {n:"Vinegar", r:10}]},
        {name: "Light Salmon Salad", method: "Mixing", ingredients: [{n:"Salmon Sashimi", r:60}, {n:"Onion", r:30}, {n:"Wine Vinegar", r:10}]},
        {name: "Marshmallow", method: "Mixing", ingredients: [{n:"Sugar", r:50}, {n:"Gelatin", r:40}, {n:"Bottled Water", r:10}]},
        {name: "Crepe Cake", method: "Mixing", ingredients: [{n:"Crepe", r:60}, {n:"Whipped Cream", r:30}, {n:"Fresh Honey", r:10}]},
        {name: "Strawberry Whipped Cream Crepe", method: "Mixing", ingredients: [{n:"Crepe", r:50}, {n:"Strawberry", r:30}, {n:"Whipped Cream", r:20}]},
        {name: "Blueberry Whipped Cream Crepe", method: "Mixing", ingredients: [{n:"Crepe", r:50}, {n:"Blueberry", r:30}, {n:"Whipped Cream", r:20}]},
        {name: "Chocolate Crepe Cake", method: "Mixing", ingredients: [{n:"Crepe", r:50}, {n:"Baking Chocolate", r:30}, {n:"Whipped Cream", r:20}]},
        {name: "Happy Dessert Time Combo", method: "Mixing", ingredients: [{n:"Strawberry Whipped Cream Crepe", r:34}, {n:"S'more", r:33}, {n:"Gelatinous Custard Pudding", r:33}]},
        {name: "Raw Chopped Kraken", method: "Mixing", ingredients: [{n:"Kraken Leg Meat", r:80}, {n:"Garlic", r:20}]},
        {name: "Kraken Stirfry", method: "Stir-frying", ingredients: [{n:"Kraken Pulpo", r:34}, {n:"Spicy Fried Kraken", r:33}, {n:"Kraken Ink Pasta", r:33}]},
        {name: "Kraken Skewer", method: "Baking", ingredients: [{n:"Kraken Leg Meat", r:80}, {n:"Red Pepper Powder", r:20}]},
        {name: "Steamed Kraken", method: "Steaming", ingredients: [{n:"Kraken Leg Meat", r:80}, {n:"Lemon Juice", r:20}]},
        {name: "Spicy Kraken Stew", method: "Boiling", ingredients: [{n:"Raw Chopped Kraken", r:34}, {n:"Steamed Kraken", r:33}, {n:"Kraken Skewer", r:33}]},
        {name: "Kraken Pulpo", method: "Simmering", ingredients: [{n:"Kraken Leg Meat", r:80}, {n:"Pepper", r:20}]},
        {name: "Spicy Fried Kraken", method: "Deep-frying", ingredients: [{n:"Kraken Leg Meat", r:60}, {n:"Fry Batter", r:30}, {n:"Lemon", r:10}]},
        {name: "Kraken Ink Pasta", method: "Pasta Making", ingredients: [{n:"Kraken Ink", r:60}, {n:"Garlic", r:20}, {n:"Olive Oil", r:20}]},
        {name: "Full Kraken Meal", method: "Mixing", ingredients: [{n:"Spicy Kraken Stew", r:50}, {n:"Kraken Stirfry", r:50}]},
        {name: "Scuabtuinne Sucker Skewers", method: "Baking", ingredients: [{n:"Fresh Kraken Sucker", r:80}, {n:"Salt", r:10}, {n:"Pepper", r:10}]},
        {name: "Scuabtuinne Sucker Sous Vide", method: "Sous Vide", ingredients: [{n:"Fresh Kraken Sucker", r:80}, {n:"Lemon Juice", r:10}, {n:"Pepper", r:10}]},
        {name: "Cheeseburger", method: "Mixing", ingredients: [{n:"Bread", r:40}, {n:"Cabbage", r:40}, {n:"Slice of Cheese", r:20}]},
        {name: "Shrimp Burger", method: "Mixing", ingredients: [{n:"Bread", r:40}, {n:"Cabbage", r:30}, {n:"Shrimp", r:30}]},
        {name: "Bacon Burger", method: "Mixing", ingredients: [{n:"Bread", r:40}, {n:"Cabbage", r:30}, {n:"Bacon", r:30}]},
        {name: "Chicken Burger", method: "Mixing", ingredients: [{n:"Bread", r:40}, {n:"Cabbage", r:30}, {n:"Chicken", r:30}]},
        {name: "Birthday Cake", method: "Mixing", ingredients: [{n:"Flour Dough", r:40}, {n:"Whipped Cream", r:40}, {n:"Strawberry", r:20}]},
        {name: "Cookies and Cream Cake", method: "Mixing", ingredients: [{n:"Flour Dough", r:40}, {n:"Whipped Cream", r:40}, {n:"Chocolate Chip Cookie", r:20}]},
        {name: "Pan's Craft Brew", method: "Mixing", ingredients: [{n:"Barley Flour", r:60}, {n:"Malt", r:20}, {n:"Bottled Water", r:20}]},
        {name: "Highball", method: "Mixing", ingredients: [{n:"Brifne Whiskey", r:80}, {n:"Lemon", r:20}]},
        {name: "Hard Cider", method: "Mixing", ingredients: [{n:"Brifne Whiskey", r:70}, {n:"Apple", r:30}]},
        {name: "Egg Sandwich", method: "Mixing", ingredients: [{n:"Fried Egg", r:60}, {n:"Sliced Bread", r:40}]},
        {name: "Red Bean Shaved Ice", method: "Mixing", ingredients: [{n:"Mung Bean", r:40}, {n:"Ice", r:40}, {n:"Assorted Fruits", r:20}]},
        {name: "Takoyaki", method: "Baking", ingredients: [{n:"Simmered Octopus", r:40}, {n:"Wheat Flour", r:40}, {n:"Egg", r:20}]},
        {name: "Egg Porridge", method: "Boiling", ingredients: [{n:"Egg", r:40}, {n:"Bottled Water", r:40}, {n:"Steamed Rice", r:20}]},
        {name: "Miso Soup", method: "Boiling", ingredients: [{n:"Soybean Paste", r:40}, {n:"Bottled Water", r:40}, {n:"Mixed Vegetables", r:20}]},
        {name: "Shoyu Ramen", method: "Noodle Making", ingredients: [{n:"Meat Broth", r:40}, {n:"Noodle", r:40}, {n:"Soy Sauce", r:20}]},
        {name: "Shio Ramen", method: "Noodle Making", ingredients: [{n:"Meat Broth", r:40}, {n:"Noodle", r:40}, {n:"Salt", r:20}]},
        {name: "Miso Ramen", method: "Noodle Making", ingredients: [{n:"Meat Broth", r:40}, {n:"Noodle", r:40}, {n:"Soybean Paste", r:20}]},
        {name: "Omurice", method: "Stir-frying", ingredients: [{n:"Mixed Fried Rice", r:60}, {n:"Egg", r:40}]},
        {name: "Weekend Warrior Hotwings and Beer", method: "Mixing", ingredients: [{n:"Fried Chicken", r:34}, {n:"Spicy Fried Chicken", r:33}, {n:"Highball", r:33}]},
        {name: "Afternoon Tea Set", method: "Mixing", ingredients: [{n:"Black Tea Honey Scone", r:34}, {n:"Macaron", r:33}, {n:"Panna Cotta", r:33}]},
        {name: "Strawberry Shortcake", method: "Baking", ingredients: [{n:"Flour Dough", r:40}, {n:"Strawberry", r:30}, {n:"Whipped Cream", r:30}]},
        {name: "Mint Chocolate Frappe", method: "Mixing", ingredients: [{n:"Milk", r:50}, {n:"Mint Syrup", r:30}, {n:"Baking Chocolate", r:20}]},
        {name: "Mint Chocolate Cookie", method: "Baking", ingredients: [{n:"Wheat Flour", r:50}, {n:"Mint Syrup", r:30}, {n:"Baking Chocolate", r:20}]},
        {name: "Apple Souffle", method: "Baking", ingredients: [{n:"Flour Dough", r:50}, {n:"Apple", r:30}, {n:"Egg", r:20}]},
        {name: "Black Tea Honey Scone", method: "Baking", ingredients: [{n:"Flour Dough", r:60}, {n:"Black Tea", r:20}, {n:"Fresh Honey", r:20}]},
        {name: "Croffle", method: "Baking", ingredients: [{n:"Croissant", r:60}, {n:"Whipped Cream", r:20}, {n:"Blueberry", r:20}]},
        {name: "Kimchi Jjigae", method: "Boiling", ingredients: [{n:"Kimchi", r:40}, {n:"Bottled Water", r:40}, {n:"Sliced Meat", r:20}]},
        {name: "Spicy Ramen", method: "Boiling", ingredients: [{n:"Somen Noodles", r:70}, {n:"Bottled Water", r:20}, {n:"Spicy Pepper", r:10}]},
        {name: "Spicy Fried Chicken", method: "Stir-frying", ingredients: [{n:"Fried Chicken", r:60}, {n:"Starch Syrup", r:20}, {n:"Gochujang", r:20}]},
        {name: "Kimchi Fried Rice", method: "Stir-frying", ingredients: [{n:"Fried Egg", r:30}, {n:"Kimchi", r:40}, {n:"Mixed Fried Rice", r:30}]},
        {name: "Truffle Cream Gnocchi", method: "Stir-frying", ingredients: [{n:"Steamed Potato", r:50}, {n:"Cream Sauce", r:30}, {n:"White Truffle", r:20}]},
        {name: "Cheese Tteok-bokki", method: "Stir-frying", ingredients: [{n:"White Rice Cake", r:50}, {n:"Gochujang", r:30}, {n:"Slice of Cheese", r:20}]},
        {name: "Croissant", method: "Pie Making", ingredients: [{n:"Flour Dough", r:60}, {n:"Milk", r:20}, {n:"Butter", r:20}]},
        {name: "Strawberry Mochi", method: "Fermenting", ingredients: [{n:"White Rice Cake", r:60}, {n:"Strawberry", r:20}, {n:"Bean Stuffing", r:20}]},
        {name: "Macaron", method: "Baking", ingredients: [{n:"Egg", r:50}, {n:"Whipped Cream", r:30}, {n:"Butter", r:20}]},
        {name: "Cabbage Jeon", method: "Baking", ingredients: [{n:"Napa Cabbage", r:60}, {n:"Wheat Flour", r:30}, {n:"Soy Sauce", r:10}]},
        {name: "Cannele", method: "Baking", ingredients: [{n:"Egg", r:60}, {n:"Milk", r:30}, {n:"Wax", r:10}]},
        {name: "Egg and Mayo Toast", method: "Baking", ingredients: [{n:"Toast", r:60}, {n:"Egg", r:30}, {n:"Mayonnaise", r:10}]},
        {name: "Black Tea", method: "Boiling", ingredients: [{n:"Tea Leaves", r:80}, {n:"Bottled Water", r:20}]},
        {name: "Milk Tea", method: "Boiling", ingredients: [{n:"Black Tea", r:70}, {n:"Milk", r:20}, {n:"Sugar", r:10}]},
        {name: "Mille Feuille Hot Pot", method: "Boiling", ingredients: [{n:"Napa Cabbage", r:40}, {n:"Beef", r:40}, {n:"Meat Broth", r:20}]},
        {name: "Panna Cotta", method: "Boiling", ingredients: [{n:"Whipped Cream", r:60}, {n:"Gelatin", r:30}, {n:"Sugar", r:10}]},
        {name: "Turkish Delight", method: "Boiling", ingredients: [{n:"Bottled Water", r:50}, {n:"Lemon Juice", r:30}, {n:"Sugar", r:20}]},
        {name: "Braised Spicy Chicken", method: "Boiling", ingredients: [{n:"Chicken", r:60}, {n:"Potato", r:20}, {n:"Gochujang", r:20}]},
        {name: "Fried Chicken", method: "Deep-frying", ingredients: [{n:"Deep Fry Batter", r:50}, {n:"Olive Oil", r:10}, {n:"Chicken", r:40}]},
        {name: "Tomato Egg Stir-Fry", method: "Stir-frying", ingredients: [{n:"Tomato", r:50}, {n:"Egg", r:40}, {n:"Pepper", r:10}]},
        {name: "Kimchi", method: "Fermenting", ingredients: [{n:"Napa Cabbage", r:80}, {n:"Red Pepper Powder", r:10}, {n:"Salt", r:10}]},
        {name: "Turkey Tetrazzini", method: "Baking", ingredients: [{n:"Turkey", r:50}, {n:"White Truffle", r:10}, {n:"Cream Farfalle", r:40}]},
        {name: "Honey Chestnut Latte", method: "Boiling", ingredients: [{n:"Simmered Chestnuts", r:30}, {n:"Fresh Honey", r:10}, {n:"Milk", r:60}]},
        {name: "Scallop Tomato Stew", method: "Boiling", ingredients: [{n:"Scallop", r:50}, {n:"Onion", r:20}, {n:"Tomato", r:30}]},
        {name: "Nutritious Walnut Bread", method: "Baking", ingredients: [{n:"Bean Stuffing", r:20}, {n:"Walnut", r:20}, {n:"Wheat Flour", r:60}]},
        {name: "Assorted Shellfish Sashimi", method: "Julienning", ingredients: [{n:"Scallop", r:50}, {n:"Fan Mussel", r:40}, {n:"Chojang", r:10}]},
        {name: "Grilled Scallop with Cheese", method: "Baking", ingredients: [{n:"Scallop", r:60}, {n:"Slice of Cheese", r:20}, {n:"Bell Pepper", r:20}]}
    ];
*/
        
    let userStars = {}; 
    let userOverrides = {}; // New storage for custom recipe data
    let currentUser = null;
    let activeMethod = 'All';
    let currentSort = 'default'; // Default is now Journal Order
    let currentJournal = 'cooking';

    // Helper: Get unique methods
    const UNIQUE_METHODS = [...new Set(RECIPE_DB.map(r => r.method))].sort();

    // --- RESTORED FUNCTIONS ---

    function toggleImport(show) {
        document.getElementById('import-modal').style.display = show ? 'flex' : 'none';
    }

    function processImport() {
        alert("This feature is now mainly for custom updates since the list is hardcoded!");
        toggleImport(false);
    }

    // NEW: Upload Local Static List to Firebase Public DB
    function uploadMasterList() {
        if (!currentUser || currentUser.isGuest) {
            alert("You must be logged in to update the public database.");
            return;
        }
        if (confirm("WARNING: This will overwrite the public 'public_recipes' database node with your current local static list. Are you sure?")) {
            const btn = document.querySelector('#import-modal .hub-btn.active');
            const originalText = btn.innerText;
            btn.innerText = "Uploading...";
            btn.disabled = true;

            db.ref('public_recipes').set(RECIPE_DB)
                .then(() => {
                    alert("Success! The public database has been updated.");
                    toggleImport(false);
                })
                .catch(e => {
                    alert("Error uploading: " + e.message + "\n\nCheck your database rules.");
                })
                .finally(() => {
                    btn.innerText = originalText;
                    btn.disabled = false;
                });
        }
    }

    function saveStars() {
        if (currentUser && !currentUser.isGuest) {
            db.ref(`users/${currentUser.uid}/cooking_stars`).set(userStars);
        } else {
            localStorage.setItem('mabi_cooking_journal', JSON.stringify(userStars));
        }
    }

    function saveOverrides() {
        if (currentUser && !currentUser.isGuest) {
            db.ref(`users/${currentUser.uid}/custom_recipes`).set(userOverrides);
        } else {
            localStorage.setItem('mabi_cooking_overrides', JSON.stringify(userOverrides));
        }
    }

    // New function to update custom data
    function updateCustomData(dishName, type, val, index = null) {
        if (!userOverrides[dishName]) {
            userOverrides[dishName] = {};
        }

        if (type === 'method') {
            userOverrides[dishName].method = val;
        } else if (type === 'ratio') {
            if (!userOverrides[dishName].ratios) userOverrides[dishName].ratios = {};
            userOverrides[dishName].ratios[index] = Number(val);
        } else if (type === 'name') {
            if (!userOverrides[dishName].names) userOverrides[dishName].names = {};
            userOverrides[dishName].names[index] = val;
        }

        saveOverrides();
    }

    function setStar(dishName, rating) {
        // Toggle Logic: If clicking the current rating, reset to 0
        const currentRating = userStars[dishName] || 0;
        
        if (currentRating === rating) {
            userStars[dishName] = 0; // Reset
        } else {
            userStars[dishName] = rating; // Set new
        }

        saveStars(); 
        renderRecipes();
        updateStats();
    }

    function setSort(type) {
        currentSort = type;
        document.querySelectorAll('.hub-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`sort-${type}`).classList.add('active');
        document.getElementById(`btn-j-${currentJournal}`).classList.add('active'); // Keep journal btn active
        renderRecipes();
    }

    function setMethod(m) {
        activeMethod = m;
        renderRecipes();
        renderFilters(); 
    }

    function setJournal(j) {
        currentJournal = j;
        document.querySelectorAll('.hub-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`btn-j-${j}`).classList.add('active');
        
        // Hide all controls/views/stats first
        ['cooking', 'fishing', 'taming'].forEach(type => {
            document.getElementById(`ctrl-${type}`).style.display = 'none';
            document.getElementById(`view-${type}`).style.display = 'none';
            document.getElementById(`stats-${type}`).style.display = 'none';
        });

        // Show selected
        document.getElementById(`ctrl-${j}`).style.display = 'block';
        if(j === 'cooking') document.getElementById(`view-${j}`).style.display = 'flex'; // flex for cooking view
        else document.getElementById(`view-${j}`).style.display = 'flex'; // flex for placeholders
        document.getElementById(`stats-${j}`).style.display = 'block';
    }

    function renderFilters() {
        if(!RECIPE_DB.length) return;
        const methods = [...new Set(RECIPE_DB.map(r => r.method))].sort();
        const container = document.getElementById('method-filters');
        let html = `<button class="hub-btn ${activeMethod==='All'?'active':''}" onclick="setMethod('All')">All Methods</button>`;
        methods.forEach(method => {
            html += `<button class="hub-btn ${activeMethod===method?'active':''}" onclick="setMethod('${method}')">${method}</button>`;
        });
        container.innerHTML = html;
    }

    function renderRecipes() {
        const container = document.getElementById('recipe-container');
        const search = document.getElementById('search-input').value.toLowerCase();
        const hideCompleted = document.getElementById('hide-completed').checked;

        let filtered = RECIPE_DB.filter(r => {
            const stars = userStars[r.name] || 0;
            if (hideCompleted && stars === 5) return false;
            
            // Note: Filtering by method checks the PUBLIC DB value, not the overridden one, to keep the list consistent
            // But we could change this to check the overridden value if desired. For now, strict DB filter.
            if (activeMethod !== 'All' && r.method !== activeMethod) return false;
            
            if (search && !r.name.toLowerCase().includes(search)) return false;
            return true;
        });

        filtered.sort((a, b) => {
            if (currentSort === 'default') return 0; // Maintain original array order (Journal Order)
            
            const starsA = userStars[a.name] || 0;
            const starsB = userStars[b.name] || 0;
            if (currentSort === 'stars-asc') return starsA - starsB;
            if (currentSort === 'stars-desc') return starsB - starsA;
            return a.name.localeCompare(b.name);
        });

        container.innerHTML = '';
        if(filtered.length === 0) {
            document.getElementById('empty-state').style.display = 'block';
            return;
        }
        document.getElementById('empty-state').style.display = 'none';

        filtered.forEach(r => {
            const stars = userStars[r.name] || 0;
            const isComplete = stars === 5;
            
            // Check for overrides
            const customData = userOverrides[r.name] || {};
            const displayMethod = customData.method || r.method;

            let starsHtml = '';
            for(let i=1; i<=5; i++) {
                starsHtml += `<span class="star ${i <= stars ? 'filled' : ''}" onclick="setStar('${r.name.replace(/'/g, "\\'")}', ${i})">‚òÖ</span>`;
            }

            // Explicit Clear Button
            let clearBtn = '';
            if (stars > 0) {
                clearBtn = `<span class="star-reset" onclick="setStar('${r.name.replace(/'/g, "\\'")}', 0)" title="Clear rating">Clear</span>`;
            }

            // Generate Method Dropdown
            let methodOptions = UNIQUE_METHODS.map(m => 
                `<option value="${m}" ${m === displayMethod ? 'selected' : ''}>${m}</option>`
            ).join('');
            
            const methodSelect = `<select class="method-select" onchange="updateCustomData('${r.name.replace(/'/g, "\\'")}', 'method', this.value)">${methodOptions}</select>`;

            let ingHtml = '';
            // Force 3 ingredient slots
            for (let idx = 0; idx < 3; idx++) {
                // Get default data if it exists in DB, otherwise use empty placeholders
                const defaultIng = r.ingredients[idx] || { n: '', r: 0 };
                
                // Get custom data overrides
                // Note: user might input a name even if default name is empty.
                const ingName = (customData.names && customData.names[idx] !== undefined) ? customData.names[idx] : defaultIng.n;
                const ratio = (customData.ratios && customData.ratios[idx] !== undefined) ? customData.ratios[idx] : defaultIng.r;
                
                // Input for percentage
                const valInput = `<input type="number" class="ing-val-input" value="${ratio}" onchange="updateCustomData('${r.name.replace(/'/g, "\\'")}', 'ratio', this.value, ${idx})">`;
                
                // Input for Name
                const nameInput = `<input type="text" class="ing-name-input" value="${ingName}" placeholder="Ingredient ${idx+1}" onchange="updateCustomData('${r.name.replace(/'/g, "\\'")}', 'name', this.value, ${idx})">`;

                ingHtml += `<div class="ing-row">
                    <div style="flex-grow:1; margin-right:5px;">${nameInput}</div>
                    <div style="display:flex; align-items:center;">
                        ${valInput}<span style="color:var(--text-dim); margin-left:2px;">%</span>
                    </div>
                </div>`;
            }

            const wikiUrl = `https://wiki.mabinogiworld.com/view/${r.name.replace(/ /g, '_')}`;

            const card = document.createElement('div');
            card.className = `recipe-card ${isComplete ? 'complete' : ''}`;
            card.innerHTML = `
                <div class="recipe-header">
                    <a href="${wikiUrl}" target="_blank" class="recipe-name" style="text-decoration:none; color:inherit;">${r.name} üîó</a>
                    ${methodSelect}
                </div>
                <div class="recipe-ingredients">
                    ${ingHtml}
                </div>
                <div class="star-rating" title="Click same star to reset">
                    ${starsHtml}
                    ${clearBtn}
                </div>
            `;
            container.appendChild(card);
        });
    }

    function updateStats() {
        const totalDishes = RECIPE_DB.length;
        if(totalDishes === 0) {
            document.getElementById('stat-completed').innerText = `0 / 0`;
            document.getElementById('stat-started').innerText = `0 / 0`;
            document.getElementById('stat-total').innerText = 0;
            return;
        }
        const entries = Object.entries(userStars);
        const validStars = entries.filter(([k,v]) => RECIPE_DB.some(r => r.name === k));
        
        // Count dishes with exactly 5 stars
        const completed = validStars.filter(([k, v]) => v === 5).length;
        
        // Count dishes with ANY stars (> 0)
        const started = validStars.filter(([k, v]) => v > 0).length;
        
        // Sum of all stars
        const totalStars = validStars.reduce((acc, [k, v]) => acc + v, 0);

        // Update Stats
        document.getElementById('stat-completed').innerText = `${completed} / ${totalDishes}`;
        document.getElementById('stat-started').innerText = `${started} / ${totalDishes}`;
        document.getElementById('stat-total').innerText = totalStars;
    }

    window.toggleSidebar = (side) => {
        const left = document.getElementById('left-panel');
        const right = document.getElementById('right-panel');
        const backdrop = document.getElementById('mobile-backdrop');
        closeSidebars();
        if (side === 'left') { left.classList.add('active'); backdrop.classList.add('active'); }
        if (side === 'right') { right.classList.add('active'); backdrop.classList.add('active'); }
    };
    window.closeSidebars = () => {
        document.getElementById('left-panel').classList.remove('active');
        document.getElementById('right-panel').classList.remove('active');
        document.getElementById('mobile-backdrop').classList.remove('active');
    };

    // ... existing auth ...
    auth.onAuthStateChanged(user => {
        if (user) {
            currentUser = user;
            db.ref(`users/${user.uid}/profile`).on('value', snap => {
                const profile = snap.val();
                if(profile) {
                    localStorage.setItem('mabi_user_cache_' + user.uid, JSON.stringify(profile));
                    document.querySelectorAll('user-header').forEach(h => { if(h.updateUI) h.updateUI(user); });
                }
            });

            // Listen for Star ratings
            db.ref(`users/${user.uid}/cooking_stars`).on('value', snap => {
                userStars = snap.val() || {};
                renderRecipes();
                updateStats();
            });

            // Listen for Recipe Overrides (NEW)
            db.ref(`users/${user.uid}/custom_recipes`).on('value', snap => {
                userOverrides = snap.val() || {};
                renderRecipes();
            });

            // NEW: Listen for Public Recipes Update (Sync Logic)
            db.ref('public_recipes').on('value', snap => {
                const publicData = snap.val();
                if (publicData) {
                    console.log("Syncing recipes from public DB...");
                    RECIPE_DB = publicData;
                    renderRecipes();
                    updateStats();
                    renderFilters(); // Re-render filters in case new methods appeared
                }
            });

        } else {
            currentUser = { uid: 'local_guest', isGuest: true };
            const localStars = localStorage.getItem('mabi_cooking_journal');
            userStars = localStars ? JSON.parse(localStars) : {};
            
            const localOverrides = localStorage.getItem('mabi_cooking_overrides');
            userOverrides = localOverrides ? JSON.parse(localOverrides) : {};

            renderRecipes();
            updateStats();
        }
    });

    setMethod('All');
    renderRecipes();
    </script>
</body>
</html>
